syntax = "proto3";

import "bscp.io/pkg/protocol/core/app/app.proto";
import "bscp.io/pkg/protocol/core/app-template-binding/app_template_binding.proto";
import "bscp.io/pkg/protocol/core/base/base.proto";
import "bscp.io/pkg/protocol/core/config-item/config_item.proto";
import "bscp.io/pkg/protocol/core/content/content.proto";
import "bscp.io/pkg/protocol/core/credential/credential.proto";
import "bscp.io/pkg/protocol/core/credential-scope/credential-scope.proto";
import "bscp.io/pkg/protocol/core/hook/hook.proto";
import "bscp.io/pkg/protocol/core/hook-release/hook_release.proto";
import "bscp.io/pkg/protocol/core/release/release.proto";
import "bscp.io/pkg/protocol/core/template/template.proto";
import "bscp.io/pkg/protocol/core/template-binding-relation/template_binding_relation.proto";
import "bscp.io/pkg/protocol/core/template-revision/template_revision.proto";
import "bscp.io/pkg/protocol/core/template-set/template_set.proto";
import "bscp.io/pkg/protocol/core/template-space/template_space.proto";
import "bscp.io/pkg/protocol/core/template-variable/template_variable.proto";
import "bscp.io/pkg/protocol/core/config-hook/config_hook.proto";
import "google/api/annotations.proto";
import "google/protobuf/struct.proto";

package pbcs;

option go_package = "bscp.io/pkg/protocol/config-server;pbcs";

service Config {
    rpc CreateApp(CreateAppReq) returns (CreateAppResp) {
        option (google.api.http) = {
            post : "/api/v1/config/create/app/app/biz_id/{biz_id}"
            body : "*"
        };
    }
    rpc UpdateApp(UpdateAppReq) returns (UpdateAppResp) {
        option (google.api.http) = {
            put : "/api/v1/config/update/app/app/app_id/{id}/biz_id/{biz_id}"
            body : "*"
        };
    }
    rpc DeleteApp(DeleteAppReq) returns (DeleteAppResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/delete/app/app/app_id/{id}/biz_id/{biz_id}"
        };
    }
    rpc GetApp(GetAppReq) returns (pbapp.App) {
        option (google.api.http) = {
            get : "/api/v1/config/get/app/app/app_id/{app_id}/biz_id/{biz_id}"
        };
    }
    rpc GetAppByName(GetAppByNameReq) returns (pbapp.App) {
        option (google.api.http) = {
            get: "/api/v1/config/biz/{biz_id}/apps/query/name/{app_name}"
        };
    }

    // 获取用户有权限的 spaces 所有的 apps
    rpc ListAppsRest(ListAppsRestReq) returns (ListAppsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps"
        };
    }
    // 按 space 查询 app 信息
    rpc ListAppsBySpaceRest(ListAppsBySpaceRestReq) returns (ListAppsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/list/app/app/biz_id/{biz_id}"
        };
    }

    rpc CreateConfigItem(CreateConfigItemReq) returns (CreateConfigItemResp) {
        option (google.api.http) = {
            post : "/api/v1/config/create/config_item/config_item/app_id/{app_id}/biz_id/{biz_id}"
            body : "*"
        };
    }
    rpc BatchUpsertConfigItems(BatchUpsertConfigItemsReq) returns (BatchUpsertConfigItemsResp) {
        option (google.api.http) = {
            put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items"
            body: "*"
        };
    }
    rpc UpdateConfigItem(UpdateConfigItemReq) returns (UpdateConfigItemResp) {
        option (google.api.http) = {
            put : "/api/v1/config/update/config_item/config_item/config_item_id/{id}/app_id/{app_id}/biz_id/{biz_id}"
            body : "*"
        };
    }
    rpc DeleteConfigItem(DeleteConfigItemReq) returns (DeleteConfigItemResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/delete/config_item/config_item/config_item_id/{id}/app_id/{app_id}/biz_id/{biz_id}"
        };
    }
    rpc GetConfigItem(GetConfigItemReq) returns (GetConfigItemResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items/{config_item_id}"
        };
    }
    rpc ListConfigItems(ListConfigItemsReq) returns (ListConfigItemsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items"
        };
    }
    rpc ListConfigItemCount(ListConfigItemCountReq) returns (ListConfigItemCountResp) {
        option (google.api.http) = {
            post : "/api/v1/config/config_item_count/biz_id/{biz_id}"
            body : "*"
        };
    }

    rpc UpdateConfigHook(UpdateConfigHookReq) returns (UpdateConfigHookResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_hooks"
            body : "*"
        };
    }
    rpc GetConfigHook(GetConfigHookReq) returns (GetConfigHookResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_hooks"
        };
    }

    rpc CreateRelease(CreateReleaseReq) returns (CreateReleaseResp) {
        option (google.api.http) = {
            post : "/api/v1/config/create/release/release/app_id/{app_id}/biz_id/{biz_id}"
            body : "*"
        };
    }
    rpc ListReleases(ListReleasesReq) returns (ListReleasesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases"
        };
    }

    rpc CreateHook(CreateHookReq) returns (CreateHookResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/hooks"
            body : "*"
        };
    }
    rpc DeleteHook(DeleteHookReq) returns (DeleteHookResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}"
        };
    }
    rpc ListHooks(ListHooksReq) returns (ListHooksResp) {
        option (google.api.http) = {
            get :  "/api/v1/config/biz/{biz_id}/hooks"
        };
    }
    rpc ListHookTags(ListHookTagsReq) returns (ListHookTagsResp) {
        option (google.api.http) = {
            get :  "/api/v1/config/biz/{biz_id}/hook_tags"
        };
    }
    rpc GetHook(GetHookReq) returns (GetHookResp){
        option (google.api.http) = {
            get :  "/api/v1/config/biz/{biz_id}/hooks/{hook_id}"
        };
    }

    rpc CreateHookRelease(CreateHookReleaseReq) returns (CreateHookReleaseResp){
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases"
            body : "*"
        };
    }
    rpc ListHookRelease(ListHookReleaseReq) returns (ListHookReleaseResp){
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases"
        };
    }
    rpc DeleteHookRelease(DeleteHookReleaseReq) returns (DeleteHookReleaseResp){
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases/{release_id}"
        };
    }
    rpc PublishHookRelease(PublishHookReleaseReq) returns (PublishHookReleaseResp){
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases/{release_id}/publish"
        };
    }
    rpc GetHookRelease(GetHookReleaseReq) returns (pbhr.HookRelease) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases/{release_id}"
        };
    }
    rpc UpdateHookRelease(UpdateHookReleaseReq) returns (UpdateHookReleaseResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_releases/{release_id}"
            body : "*"
        };
    }
    rpc ListHookReleasesReferences(ListHookReleasesReferencesReq) returns (ListHookReleasesReferencesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/references"
        };
    }

    rpc CreateTemplateSpace(CreateTemplateSpaceReq) returns (CreateTemplateSpaceResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces"
            body : "*"
        };
    }
    rpc DeleteTemplateSpace(DeleteTemplateSpaceReq) returns (DeleteTemplateSpaceResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}"
        };
    }
    rpc UpdateTemplateSpace(UpdateTemplateSpaceReq) returns (UpdateTemplateSpaceResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}"
            body : "*"
        };
    }
    rpc ListTemplateSpaces(ListTemplateSpacesReq) returns (ListTemplateSpacesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces"
        };
    }
    // GetAllBizsOfTemplateSpaces called only by system itself
    rpc GetAllBizsOfTemplateSpaces(pbbase.EmptyReq) returns (GetAllBizsOfTemplateSpacesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/template_spaces/bizs"
        };
    }
    // CreateDefaultTemplateSpace called only by system itself
    rpc CreateDefaultTemplateSpace(CreateDefaultTemplateSpaceReq) returns (CreateDefaultTemplateSpaceResp) {
        option (google.api.http) = {
            post : "/api/v1/config/template_spaces/default"
            body : "*"
        };
    }
    rpc ListTemplateSpacesByIDs(ListTemplateSpacesByIDsReq) returns (ListTemplateSpacesByIDsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/list_by_ids"
            body : "*"
        };
    }

    rpc CreateTemplate(CreateTemplateReq) returns (CreateTemplateResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates"
            body : "*"
        };
    }
    rpc DeleteTemplate(DeleteTemplateReq) returns (DeleteTemplateResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}"
        };
    }
    rpc BatchDeleteTemplate(BatchDeleteTemplateReq) returns (BatchDeleteTemplateResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates"
        };
    }
    rpc UpdateTemplate(UpdateTemplateReq) returns (UpdateTemplateResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}"
            body : "*"
        };
    }
    rpc ListTemplates(ListTemplatesReq) returns (ListTemplatesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates"
        };
    }
    rpc AddTemplatesToTemplateSets(AddTemplatesToTemplateSetsReq) returns (AddTemplatesToTemplateSetsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/add_to_template_sets"
            body : "*"
        };
    }
    rpc DeleteTemplatesFromTemplateSets(DeleteTemplatesFromTemplateSetsReq) returns(DeleteTemplatesFromTemplateSetsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/delete_from_template_sets"
            body : "*"
        };
    }
    rpc ListTemplatesByIDs(ListTemplatesByIDsReq) returns (ListTemplatesByIDsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/templates/list_by_ids"
            body : "*"
        };
    }
    rpc ListTemplatesNotBound(ListTemplatesNotBoundReq) returns (ListTemplatesNotBoundResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/list_not_bound"
        };
    }
    rpc ListTemplatesOfTemplateSet(ListTemplatesOfTemplateSetReq) returns (ListTemplatesOfTemplateSetResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/{template_set_id}/templates"
        };
    }

    rpc CreateTemplateRevision(CreateTemplateRevisionReq) returns (CreateTemplateRevisionResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions"
            body : "*"
        };
    }
    rpc ListTemplateRevisions(ListTemplateRevisionsReq) returns (ListTemplateRevisionsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions"
        };
    }
    rpc DeleteTemplateRevision(DeleteTemplateRevisionReq) returns (DeleteTemplateRevisionResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions/{template_revision_id}"
        };
    }
    rpc ListTemplateRevisionsByIDs(ListTemplateRevisionsByIDsReq) returns (ListTemplateRevisionsByIDsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_revisions/list_by_ids"
            body : "*"
        };
    }

    rpc CreateTemplateSet(CreateTemplateSetReq) returns (CreateTemplateSetResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets"
            body : "*"
        };
    }
    rpc DeleteTemplateSet(DeleteTemplateSetReq) returns (DeleteTemplateSetResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/{template_set_id}"
        };
    }
    rpc UpdateTemplateSet(UpdateTemplateSetReq) returns (UpdateTemplateSetResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/{template_set_id}"
            body : "*"
        };
    }
    rpc ListTemplateSets(ListTemplateSetsReq) returns (ListTemplateSetsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets"
        };
    }
    rpc ListAppTemplateSets(ListAppTemplateSetsReq) returns (ListAppTemplateSetsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_sets"
        };
    }
    rpc ListTemplateSetsByIDs(ListTemplateSetsByIDsReq) returns (ListTemplateSetsByIDsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_sets/list_by_ids"
            body : "*"
        };
    }

    rpc CreateAppTemplateBinding(CreateAppTemplateBindingReq) returns (CreateAppTemplateBindingResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings"
            body : "*"
        };
    }
    rpc DeleteAppTemplateBinding(DeleteAppTemplateBindingReq) returns (DeleteAppTemplateBindingResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/{binding_id}"
        };
    }
    rpc UpdateAppTemplateBinding(UpdateAppTemplateBindingReq) returns (UpdateAppTemplateBindingResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/{binding_id}"
            body : "*"
        };
    }
    rpc ListAppTemplateBindings(ListAppTemplateBindingsReq) returns (ListAppTemplateBindingsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings"
        };
    }

    rpc ListTemplateBoundCounts(ListTemplateBoundCountsReq) returns (ListTemplateBoundCountsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/bound_counts"
            body : "*"
        };
    }
    rpc ListTemplateRevisionBoundCounts(ListTemplateRevisionBoundCountsReq) returns (ListTemplateRevisionBoundCountsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions/bound_counts"
            body : "*"
        };
    }
    rpc ListTemplateSetBoundCounts(ListTemplateSetBoundCountsReq) returns (ListTemplateSetBoundCountsResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/bound_counts"
            body : "*"
        };
    }
    rpc ListTemplateBoundUnnamedAppDetails(ListTemplateBoundUnnamedAppDetailsReq) returns
        (ListTemplateBoundUnnamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/bound_unnamed_app_details"
        };
    }
    rpc ListTemplateBoundNamedAppDetails(ListTemplateBoundNamedAppDetailsReq) returns
        (ListTemplateBoundNamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/bound_named_app_details"
        };
    }
    rpc ListTemplateBoundTemplateSetDetails(ListTemplateBoundTemplateSetDetailsReq) returns
        (ListTemplateBoundTemplateSetDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/bound_template_set_details"
        };
    }
    rpc ListTemplateRevisionBoundUnnamedAppDetails(ListTemplateRevisionBoundUnnamedAppDetailsReq) returns
        (ListTemplateRevisionBoundUnnamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions/{template_revision_id}/bound_unnamed_app_details"
        };
    }
    rpc ListTemplateRevisionBoundNamedAppDetails(ListTemplateRevisionBoundNamedAppDetailsReq) returns
        (ListTemplateRevisionBoundNamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions/{template_revision_id}/bound_named_app_details"
        };
    }
    rpc ListTemplateSetBoundUnnamedAppDetails(ListTemplateSetBoundUnnamedAppDetailsReq) returns
        (ListTemplateSetBoundUnnamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/{template_set_id}/bound_unnamed_app_details"
        };
    }
    rpc ListMultiTemplateSetBoundUnnamedAppDetails(ListMultiTemplateSetBoundUnnamedAppDetailsReq) returns
        (ListMultiTemplateSetBoundUnnamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/bound_unnamed_app_details"
        };
    }
    rpc ListTemplateSetBoundNamedAppDetails(ListTemplateSetBoundNamedAppDetailsReq) returns
        (ListTemplateSetBoundNamedAppDetailsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_sets/{template_set_id}/bound_named_app_details"
        };
    }

    rpc CreateTemplateVariable(CreateTemplateVariableReq) returns (CreateTemplateVariableResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/template_variables"
            body : "*"
        };
    }
    rpc DeleteTemplateVariable(DeleteTemplateVariableReq) returns (DeleteTemplateVariableResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/template_variables/{template_variable_id}"
        };
    }
    rpc UpdateTemplateVariable(UpdateTemplateVariableReq) returns (UpdateTemplateVariableResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/template_variables/{template_variable_id}"
            body : "*"
        };
    }
    rpc ListTemplateVariables(ListTemplateVariablesReq) returns (ListTemplateVariablesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/template_variables"
        };
    }

    rpc CreateGroup(CreateGroupReq) returns (CreateGroupResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz/{biz_id}/groups"
            body : "*"
        };
    }
    rpc DeleteGroup(DeleteGroupReq) returns (DeleteGroupResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz/{biz_id}/groups/{group_id}"
        };
    }
    rpc UpdateGroup(UpdateGroupReq) returns (UpdateGroupResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz/{biz_id}/groups/{group_id}"
            body : "*"
        };
    }
    rpc ListAllGroups(ListAllGroupsReq) returns (ListAllGroupsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/groups"
        };
    }
    rpc ListAppGroups(ListAppGroupsReq) returns (ListAppGroupsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/apps/{app_id}/groups"
        };
    }
    rpc ListGroupReleasedApps(ListGroupReleasedAppsReq) returns (ListGroupReleasedAppsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz/{biz_id}/groups/{group_id}/released_apps"
        };
    }

    rpc Publish(PublishReq) returns (PublishResp) {
        option (google.api.http) = {
            post : "/api/v1/config/update/strategy/publish/publish/release_id/{release_id}/app_id/{app_id}/biz_id/{biz_id}"
            body : "*"
        };
    }

    rpc GenerateReleaseAndPublish(GenerateReleaseAndPublishReq) returns (PublishResp) {
        option (google.api.http) = {
            post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/publish"
            body: "*"
        };
    }

    rpc CreateCredentials(CreateCredentialReq) returns (CreateCredentialResp) {
        option (google.api.http) = {
            post : "/api/v1/config/biz_id/{biz_id}/credentials"
            body : "*"
        };
    }
    rpc ListCredentials(ListCredentialsReq) returns (ListCredentialsResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz_id/{biz_id}/credentials"
        };
    }
    rpc DeleteCredential(DeleteCredentialsReq) returns (DeleteCredentialsResp) {
        option (google.api.http) = {
            delete : "/api/v1/config/biz_id/{biz_id}/credential"
        };
    }
    rpc UpdateCredential(UpdateCredentialsReq) returns (UpdateCredentialsResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz_id/{biz_id}/credential"
            body : "*"
        };
    }

    rpc ListCredentialScopes(ListCredentialScopesReq) returns (ListCredentialScopesResp) {
        option (google.api.http) = {
            get : "/api/v1/config/biz_id/{biz_id}/credential/{credential_id}/scopes"
        };
    }
    rpc UpdateCredentialScope(UpdateCredentialScopeReq) returns (UpdateCredentialScopeResp) {
        option (google.api.http) = {
            put : "/api/v1/config/biz_id/{biz_id}/credential/{credential_id}/scope"
            body : "*"
        };
    }
}

message UpdateCredentialScopeReq {
    repeated uint32                del_id        = 1;
    repeated string                add_scope     = 2;
    uint32                         biz_id        = 3;
    uint32                         credential_id = 4;
    repeated pbcrs.UpdateScopeSpec alter_scope   = 5;
}

message UpdateCredentialScopeResp {}

message ListCredentialScopesReq {
    uint32 biz_id        = 1;
    uint32 credential_id = 2;
}

message ListCredentialScopesResp {
    uint32                             count   = 1;
    repeated pbcrs.CredentialScopeList details = 2;
}

message EnableCredentialsReq {
    uint32 id     = 1;
    uint32 biz_id = 2;
    bool   enable = 3;
}

message EnableCredentialsResp {}

message DeleteCredentialsReq {
    uint32 id     = 1;
    uint32 biz_id = 2;
}

message DeleteCredentialsResp {}
message UpdateCredentialsReq {
    uint32 id     = 1;
    uint32 biz_id = 2;
    bool   enable = 3;
    string memo   = 4;
}

message UpdateCredentialsResp {}

message ListCredentialsReq {
    uint32 biz_id    = 1;
    string searchKey = 2;
    uint32 start     = 3;
    uint32 limit     = 4;
}

message ListCredentialsResp {
    uint32                               count   = 1;
    repeated pbcredential.CredentialList details = 2;
}

message CreateCredentialReq {
    string          memo   = 1;
    uint32          biz_id = 2;
    repeated string scope  = 3;
}

message CreateCredentialResp {
    uint32 id = 1;
}

message CreateAppReq {
    uint32 biz_id           = 1;
    string name             = 2;
    string config_type      = 3; // config_type is enum type, source resource reference: pkg/dal/table/app.go
    string mode             = 4; // deploy_type is enum type, source resource reference: pkg/dal/table/app.go
    string memo             = 5;
    string reload_type      = 6;
    string reload_file_path = 7;
}

message CreateAppResp {
    uint32 id = 1;
}

message UpdateAppReq {
    uint32 id               = 1;
    uint32 biz_id           = 2;
    string name             = 3;
    string memo             = 4;
    string reload_type      = 5;
    string reload_file_path = 6;
}

message UpdateAppResp {}

message DeleteAppReq {
    uint32 id     = 1;
    uint32 biz_id = 2;
}

message DeleteAppResp {}

message GetAppReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
}

message GetAppByNameReq {
    uint32 biz_id   = 1;
    string app_name = 2;
}

message ListAppsRestReq {
    uint32 biz_id   = 1;
    uint32 start    = 2;
    uint32 limit    = 3;
    string operator = 4;
    string name     = 5;
}

message ListAppsBySpaceRestReq {
    uint32 biz_id   = 1;
    uint32 start    = 2;
    uint32 limit    = 3;
    string operator = 4;
    string name     = 5;
}

message ListAppsResp {
    uint32             count   = 1;
    repeated pbapp.App details = 2;
}

message CreateConfigItemReq {
    uint32 biz_id     = 1;
    uint32 app_id     = 2;
    string name       = 3;
    string path       = 4;
    string file_type  = 5; // file_type is enum type, source resource reference: pkg/dal/table/config_item.go
    string file_mode  = 6; // file_mode is enum type, source resource reference: pkg/dal/table/config_item.go
    string memo       = 7;
    string user       = 8;
    string user_group = 9;
    string privilege  = 10;
    string sign       = 11;
    uint64 byte_size  = 12;
}

message BatchUpsertConfigItemsReq {
    message ConfigItem {
        string name       = 1;
        string path       = 2;
        string file_type  = 3;  // file_type is enum type, source resource reference: pkg/dal/table/config_item.go
        string file_mode  = 4;  // file_mode is enum type, source resource reference: pkg/dal/table/config_item.go
        string memo       = 5;
        string user       = 6;
        string user_group = 7;
        string privilege  = 8;
        string sign       = 9;
        uint64 byte_size  = 10;
    }
    uint32              biz_id = 1;
    uint32              app_id = 2;
    repeated ConfigItem items  = 3;
}

message BatchUpsertConfigItemsResp {}

message CreateConfigItemResp {
    uint32 id = 1;
}

message UpdateConfigItemReq {
    uint32 id         = 1;
    uint32 biz_id     = 2;
    uint32 app_id     = 3;
    string name       = 4;
    string path       = 5;
    string file_type  = 6; // file_type is enum type, source resource reference: pkg/dal/table/config_item.go
    string file_mode  = 7; // file_mode is enum type, source resource reference: pkg/dal/table/config_item.go
    string memo       = 8;
    string user       = 9;
    string user_group = 10;
    string privilege  = 11;
    string sign       = 12;
    uint64 byte_size  = 13;
}

message UpdateConfigItemResp {}

message DeleteConfigItemReq {
    uint32 id     = 1;
    uint32 biz_id = 2;
    uint32 app_id = 3;
}

message DeleteConfigItemResp {}

message GetConfigItemReq {
    uint32 biz_id         = 1;
    uint32 config_item_id = 2;
    uint32 app_id         = 3;
    uint32 release_id     = 4;
}

message GetConfigItemResp {
    pbci.ConfigItem       config_item = 1;
    pbcontent.ContentSpec content     = 2;
}

message ListConfigItemsReq {
    uint32 biz_id     = 1;
    uint32 app_id     = 2;
    uint32 release_id = 3;
    uint32 start      = 4;
    uint32 limit      = 5;
    bool   all        = 6;
    string searchKey  = 7;
}

message ListConfigItemsResp {
    uint32                   count   = 1;
    repeated pbci.ConfigItem details = 2;
}

message ListConfigItemCountReq {
    uint32          biz_id = 1;
    repeated uint32 app_id = 2;
}

message ListConfigItemCountResp {
    repeated pbci.ListConfigItemCounts details = 1;
}

message CreateConfigHookReq {
    uint32 biz_id       = 1;
    uint32 app_id       = 2;
    uint32 pre_hook_id  = 3;
    uint32 post_hook_id = 4;
}

message CreateConfigHookResp {
    uint32 id = 1;
}

message UpdateConfigHookReq {
    uint32 biz_id       = 1;
    uint32 app_id       = 2;
    uint32 pre_hook_id  = 3;
    uint32 post_hook_id = 4;
    bool   enable       = 5;
}

message UpdateConfigHookResp {}

message GetConfigHookReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
}

message  GetConfigHookResp {
    pbch.ConfigHook config_hook = 1;
}

message CreateReleaseReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
    string name   = 3;
    string memo   = 4;
}

message CreateReleaseResp {
    uint32 id = 1;
}

message ListReleasesReq {
    uint32 biz_id     = 1;
    uint32 app_id     = 2;
    string searchKey  = 3;
    uint32 start      = 4;
    uint32 limit      = 5;
    bool   all        = 6;
    bool   deprecated = 7;
}

message ListReleasesResp {
    uint32                     count   = 1;
    repeated pbrelease.Release details = 2;
}

message CreateHookReq {
    uint32 biz_id       = 1;
    string name         = 2;
    string release_name = 3;
    string type         = 4;
    string tag          = 5;
    string memo         = 6;
    string content      = 7;
}

message CreateHookResp {
    uint32 id = 1;
}

message DeleteHookReq {
    uint32 biz_id  = 1;
    uint32 hook_id = 2;
}

message DeleteHookResp {}

message ListHooksReq {
    uint32 biz_id  = 1;
    string name    = 2;
    string tag     = 3;
    bool   all     = 4;
    bool   not_tag = 5;
    uint32 start   = 6;
    uint32 limit   = 7;
}

message ListHooksResp {
    uint32               count   = 1;
    repeated pbhook.Hook details = 2;
}

message ListHookTagsReq {
    uint32 biz_id = 1;
}

message ListHookTagsResp {
    repeated pbhook.CountHookTags details = 1;
}

message CreateHookReleaseReq {
    uint32 biz_id  = 1;
    uint32 hook_id = 2;
    string name    = 3;
    string memo    = 4;
    string content = 7;
}

message CreateHookReleaseResp {
    uint32 id = 1;
}

message ListHookReleaseReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    string search_key = 3;
    uint32 start      = 4;
    uint32 limit      = 5;
    bool   all        = 6;
    string state      = 7;
}

message ListHookReleaseResp {
    uint32                    count   = 1;
    repeated pbhr.HookRelease details = 2;
}

message DeleteHookReleaseReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    uint32 release_id = 3;
}

message DeleteHookReleaseResp {}

message PublishHookReleaseReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    uint32 release_id = 3;
}

message PublishHookReleaseResp {}

message GetHookReq {
    uint32 biz_id  = 1;
    uint32 hook_id = 2;
}

message GetHookResp {
    uint32                id         = 1;
    GetHookInfoSpec       spec       = 2;
    pbhook.HookAttachment attachment = 3;
    pbbase.Revision       revision   = 4;
}

message GetHookInfoSpec {
    string   name        = 1;
    string   type        = 3;
    string   tag         = 4;
    string   memo        = 5;
    uint32   publish_num = 7;
    message Releases  {
        uint32 not_release_id = 1;
    }
    Releases releases    = 8;
}

message GetHookReleaseReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    uint32 release_id = 3;
}

message UpdateHookReleaseReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    uint32 release_id = 3;
    string name       = 4;
    string content    = 5;
    string memo       = 6;
}

message UpdateHookReleaseResp {}

message ListHookReleasesReferencesReq {
    uint32 biz_id     = 1;
    uint32 hook_id    = 2;
    uint32 release_id = 3;
    uint32 start      = 4;
    uint32 limit      = 5;
}

message ListHookReleasesReferencesResp {
    uint32                                          count   = 1;
    repeated pbhr.ListHookReleasesReferencesDetails details = 2;
}

message CreateTemplateSpaceReq {
    uint32 biz_id = 1;
    string name   = 2;
    string memo   = 3;
}

message CreateTemplateSpaceResp {
    uint32 id = 1;
}

message UpdateTemplateSpaceReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string memo              = 3;
}

message UpdateTemplateSpaceResp {
}

message DeleteTemplateSpaceReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
}

message DeleteTemplateSpaceResp {}

message ListTemplateSpacesReq {
    uint32 biz_id        = 1;
    string search_fields = 2;
    string search_value  = 3;
    uint32 start         = 4;
    uint32 limit         = 5;
    bool   all           = 6;
}

message ListTemplateSpacesResp {
    uint32                      count   = 1;
    repeated pbts.TemplateSpace details = 2;
}

message GetAllBizsOfTemplateSpacesResp {
    repeated uint32 biz_ids = 1;
}

message CreateDefaultTemplateSpaceReq{
    uint32 biz_id = 1;
}

message CreateDefaultTemplateSpaceResp{
    uint32 id = 1;
}

message ListTemplateSpacesByIDsReq {
    uint32          biz_id = 1;
    repeated uint32 ids    = 2;
}

message ListTemplateSpacesByIDsResp {
    repeated pbts.TemplateSpace details = 1;
}

message CreateTemplateReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    string          name              = 3;
    string          path              = 4;
    string          memo              = 5;
    // string          revision_name     = 6;
    string          revision_memo     = 7;
    string          file_type         = 8; // file_type is enum type
    string          file_mode         = 9; // file_mode is enum type
    string          user              = 10;
    string          user_group        = 11;
    string          privilege         = 12;
    string          sign              = 13;
    uint64          byte_size         = 14;
    repeated uint32 template_set_ids  = 15;
}

message CreateTemplateResp {
    uint32 id = 1;
}

message UpdateTemplateReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    string memo              = 4;
}

message UpdateTemplateResp {
}

message DeleteTemplateReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    bool   force             = 4;
}

message DeleteTemplateResp {}

message BatchDeleteTemplateReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string template_ids      = 3;
    bool   force             = 4;
}

message BatchDeleteTemplateResp {}

message ListTemplatesReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string search_fields     = 3;
    string search_value      = 4;
    uint32 start             = 5;
    uint32 limit             = 6;
    bool   all               = 7;
}

message ListTemplatesResp {
    uint32                       count   = 1;
    repeated pbtemplate.Template details = 2;
}

message AddTemplatesToTemplateSetsReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    repeated uint32 template_ids      = 3;
    repeated uint32 template_set_ids  = 4;
}

message AddTemplatesToTemplateSetsResp {}


message DeleteTemplatesFromTemplateSetsReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    repeated uint32 template_ids      = 3;
    repeated uint32 template_set_ids  = 4;
}

message DeleteTemplatesFromTemplateSetsResp {}

message ListTemplatesByIDsReq {
    uint32          biz_id = 1;
    repeated uint32 ids    = 2;
}

message ListTemplatesByIDsResp {
    repeated pbtemplate.Template details = 1;
}

message ListTemplatesNotBoundReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string search_fields     = 3;
    string search_value      = 4;
    uint32 start             = 5;
    uint32 limit             = 6;
    bool   all               = 7;
}

message ListTemplatesNotBoundResp {
    uint32                       count   = 1;
    repeated pbtemplate.Template details = 2;
}

message ListTemplatesOfTemplateSetReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_set_id   = 3;
    string search_fields     = 4;
    string search_value      = 5;
    uint32 start             = 6;
    uint32 limit             = 7;
    bool   all               = 8;
}

message ListTemplatesOfTemplateSetResp {
    uint32                       count   = 1;
    repeated pbtemplate.Template details = 2;
}

message CreateTemplateRevisionReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    // string revision_name      = 4;
    string revision_memo     = 5;
    string name              = 6;
    string path              = 7;
    string file_type         = 8; // file_type is enum type
    string file_mode         = 9; // file_mode is enum type
    string user              = 10;
    string user_group        = 11;
    string privilege         = 12;
    string sign              = 13;
    uint64 byte_size         = 14;
}

message CreateTemplateRevisionResp {
    uint32 id = 1;
}

message ListTemplateRevisionsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    string search_fields     = 4;
    string search_value      = 5;
    uint32 start             = 6;
    uint32 limit             = 7;
    bool   all               = 8;
}

message ListTemplateRevisionsResp {
    uint32                         count   = 1;
    repeated pbtr.TemplateRevision details = 2;
}

message DeleteTemplateRevisionReq {
    uint32 biz_id               = 1;
    uint32 template_space_id    = 2;
    uint32 template_id          = 3;
    uint32 template_revision_id = 4;
}

message DeleteTemplateRevisionResp {}

message ListTemplateRevisionsByIDsReq {
    uint32          biz_id = 1;
    repeated uint32 ids    = 2;
}

message ListTemplateRevisionsByIDsResp {
    repeated pbtr.TemplateRevision details = 1;
}

message CreateTemplateSetReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    string          name              = 3;
    string          memo              = 4;
    repeated uint32 template_ids      = 5;
    bool            public            = 6;
    repeated uint32 bound_apps        = 7;
}

message CreateTemplateSetResp {
    uint32 id = 1;
}

message UpdateTemplateSetReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    uint32          template_set_id   = 3;
    string          name              = 4;
    string          memo              = 5;
    repeated uint32 template_ids      = 6;
    bool            public            = 7;
    repeated uint32 bound_apps        = 8;
    bool            force             = 9;
}

message UpdateTemplateSetResp {
}

message DeleteTemplateSetReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_set_id   = 3;
    bool   force             = 4;
}

message DeleteTemplateSetResp {}

message ListTemplateSetsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string search_fields     = 3;
    string search_value      = 4;
    uint32 start             = 5;
    uint32 limit             = 6;
    bool   all               = 7;
}

message ListTemplateSetsResp {
    uint32                      count   = 1;
    repeated pbtset.TemplateSet details = 2;
}

message ListAppTemplateSetsReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
}

message ListAppTemplateSetsResp {
    repeated pbtset.TemplateSet details = 1;
}

message ListTemplateSetsByIDsReq {
    uint32          biz_id = 1;
    repeated uint32 ids    = 2;
}

message ListTemplateSetsByIDsResp {
    repeated pbtset.TemplateSet details = 1;
}

message CreateAppTemplateBindingReq {
    uint32                         biz_id   = 1;
    uint32                         app_id   = 2;
    repeated pbatb.TemplateBinding bindings = 3;
}

message CreateAppTemplateBindingResp {
    uint32 id = 1;
}

message UpdateAppTemplateBindingReq {
    uint32                         biz_id     = 1;
    uint32                         app_id     = 2;
    uint32                         binding_id = 3;
    repeated pbatb.TemplateBinding bindings   = 4;
}

message UpdateAppTemplateBindingResp {
}

message DeleteAppTemplateBindingReq {
    uint32 biz_id     = 1;
    uint32 app_id     = 2;
    uint32 binding_id = 3;
}

message DeleteAppTemplateBindingResp {}

message ListAppTemplateBindingsReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
}

message ListAppTemplateBindingsResp {
    uint32                            count   = 1;
    repeated pbatb.AppTemplateBinding details = 2;
}

message ListTemplateBoundCountsReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    repeated uint32 template_ids      = 3;
}

message ListTemplateBoundCountsResp {
    repeated pbtbr.TemplateBoundCounts details = 1;
}

message ListTemplateRevisionBoundCountsReq {
    uint32          biz_id                = 1;
    uint32          template_space_id     = 2;
    uint32          template_id           = 3;
    repeated uint32 template_revision_ids = 4;
}

message ListTemplateRevisionBoundCountsResp {
    repeated pbtbr.TemplateRevisionBoundCounts details = 1;
}

message ListTemplateSetBoundCountsReq {
    uint32          biz_id            = 1;
    uint32          template_space_id = 2;
    repeated uint32 template_set_ids  = 3;
}

message ListTemplateSetBoundCountsResp {
    repeated pbtbr.TemplateSetBoundCounts details = 1;
}

message ListTemplateBoundUnnamedAppDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListTemplateBoundUnnamedAppDetailsResp {
    uint32                                       count   = 1;
    repeated pbtbr.TemplateBoundUnnamedAppDetail details = 2;
}

message ListTemplateBoundNamedAppDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListTemplateBoundNamedAppDetailsResp {
    uint32                                     count   = 1;
    repeated pbtbr.TemplateBoundNamedAppDetail details = 2;
}

message ListTemplateBoundTemplateSetDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_id       = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListTemplateBoundTemplateSetDetailsResp {
    uint32                                        count   = 1;
    repeated pbtbr.TemplateBoundTemplateSetDetail details = 2;
}

message ListTemplateRevisionBoundUnnamedAppDetailsReq {
    uint32 biz_id               = 1;
    uint32 template_space_id    = 2;
    uint32 template_id          = 3;
    uint32 template_revision_id = 4;
    uint32 start                = 5;
    uint32 limit                = 6;
    bool   all                  = 7;
}

message ListTemplateRevisionBoundUnnamedAppDetailsResp {
    uint32                                               count   = 1;
    repeated pbtbr.TemplateRevisionBoundUnnamedAppDetail details = 2;
}

message ListTemplateRevisionBoundNamedAppDetailsReq {
    uint32 biz_id               = 1;
    uint32 template_space_id    = 2;
    uint32 template_id          = 3;
    uint32 template_revision_id = 4;
    uint32 start                = 5;
    uint32 limit                = 6;
    bool   all                  = 7;
}

message ListTemplateRevisionBoundNamedAppDetailsResp {
    uint32                                             count   = 1;
    repeated pbtbr.TemplateRevisionBoundNamedAppDetail details = 2;
}

message ListTemplateSetBoundUnnamedAppDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_set_id   = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListTemplateSetBoundUnnamedAppDetailsResp {
    uint32                                          count   = 1;
    repeated pbtbr.TemplateSetBoundUnnamedAppDetail details = 2;
}

message ListMultiTemplateSetBoundUnnamedAppDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    string template_set_ids  = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListMultiTemplateSetBoundUnnamedAppDetailsResp {
    uint32                                               count   = 1;
    repeated pbtbr.MultiTemplateSetBoundUnnamedAppDetail details = 2;
}


message ListTemplateSetBoundNamedAppDetailsReq {
    uint32 biz_id            = 1;
    uint32 template_space_id = 2;
    uint32 template_set_id   = 3;
    uint32 start             = 4;
    uint32 limit             = 5;
    bool   all               = 6;
}

message ListTemplateSetBoundNamedAppDetailsResp {
    uint32                                        count   = 1;
    repeated pbtbr.TemplateSetBoundNamedAppDetail details = 2;
}

message CreateTemplateVariableReq {
    uint32 biz_id      = 1;
    string name        = 2;
    string type        = 3;
    string default_val = 4;
    string memo        = 5;
}

message CreateTemplateVariableResp {
    uint32 id = 1;
}

message UpdateTemplateVariableReq {
    uint32 biz_id               = 1;
    uint32 template_variable_id = 2;
    string default_val          = 3;
    string memo                 = 4;
}

message UpdateTemplateVariableResp {
}

message DeleteTemplateVariableReq {
    uint32 biz_id               = 1;
    uint32 template_variable_id = 2;
}

message DeleteTemplateVariableResp {}

message ListTemplateVariablesReq {
    uint32 biz_id        = 1;
    string search_fields = 2;
    string search_value  = 3;
    uint32 start         = 4;
    uint32 limit         = 5;
    bool   all           = 6;
}

message ListTemplateVariablesResp {
    uint32                         count   = 1;
    repeated pbtv.TemplateVariable details = 2;
}

message CreateGroupReq {
    uint32                 biz_id    = 1;
    string                 name      = 2;
    bool                   public    = 3;
    repeated uint32        bind_apps = 4;
    string                 mode      = 5;
    google.protobuf.Struct selector  = 6;
    string                 uid       = 7;
}

message CreateGroupResp {
    uint32 id = 1;
}

message UpdateGroupReq {
    uint32                 biz_id    = 1;
    uint32                 group_id  = 2;
    string                 name      = 3;
    bool                   public    = 4;
    repeated uint32        bind_apps = 5;
    string                 mode      = 6;
    google.protobuf.Struct selector  = 7;
    string                 uid       = 8;
}

message UpdateGroupResp {}

message DeleteGroupReq {
    uint32 biz_id   = 1;
    uint32 group_id = 2;
}

message DeleteGroupResp {}

message ListAllGroupsReq {
    uint32 biz_id = 1;
}

message ListAllGroupsResp {
    message ListAllGroupsData {
        message BindApp {
            uint32 id   = 1;
            string name = 2;
        }
        uint32                 id                = 1;
        string                 name              = 2;
        bool                   public            = 3;
        repeated BindApp       bind_apps         = 4;
        google.protobuf.Struct selector          = 5;
        uint32                 released_apps_num = 6;
        bool                   edited            = 7;
    }
    repeated ListAllGroupsData details = 1;
}

message ListAppGroupsReq {
    uint32 biz_id = 1;
    uint32 app_id = 2;
}

message ListAppGroupsResp {
    message ListAppGroupsData {
        uint32                 group_id     = 1;
        string                 group_name   = 2;
        uint32                 release_id   = 3;
        string                 release_name = 4;
        google.protobuf.Struct old_selector = 5;
        google.protobuf.Struct new_selector = 6;
        bool                   edited       = 7;
    }
    repeated ListAppGroupsData details = 1;
}

message ListGroupReleasedAppsReq {
    uint32 biz_id   = 1;
    uint32 group_id = 2;
    uint32 start    = 3;
    uint32 limit    = 4;
}

message ListGroupReleasedAppsResp {
    message ListGroupReleasedAppsData {
        uint32 app_id       = 1;
        string app_name     = 2;
        uint32 release_id   = 3;
        string release_name = 4;
        bool   edited       = 5;
    }
    uint32                             count   = 1;
    repeated ListGroupReleasedAppsData details = 2;
}

message PublishReq {
    uint32          biz_id     = 1;
    uint32          app_id     = 2;
    uint32          release_id = 3;
    string          memo       = 4;
    bool            all        = 5;
    bool            default    = 6;
    repeated uint32 groups     = 7;
}

message GenerateReleaseAndPublishReq {
    uint32          biz_id       = 1;
    uint32          app_id       = 2;
    string          release_name = 3;
    string          release_memo = 4;
    bool            all          = 5;
    repeated string groups       = 6;
}

message GenerateReleaseAndPublishResp {
    uint32 id = 1;
}

message PublishResp {
    uint32 id = 1;
}
