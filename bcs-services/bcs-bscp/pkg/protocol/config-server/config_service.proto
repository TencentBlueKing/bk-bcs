syntax = "proto3";

import "pkg/protocol/core/app/app.proto";
import "pkg/protocol/core/app-template-binding/app_template_binding.proto";
import "pkg/protocol/core/base/base.proto";
import "pkg/protocol/core/config-item/config_item.proto";
import "pkg/protocol/core/content/content.proto";
import "pkg/protocol/core/group/group.proto";
import "pkg/protocol/core/credential/credential.proto";
import "pkg/protocol/core/client/client.proto";
import "pkg/protocol/core/client-event/client_event.proto";
import "pkg/protocol/core/client-query/client_query.proto";
import "pkg/protocol/core/credential-scope/credential-scope.proto";
import "pkg/protocol/core/hook/hook.proto";
import "pkg/protocol/core/hook-revision/hook_revision.proto";
import "pkg/protocol/core/release/release.proto";
import "pkg/protocol/core/released-ci/released_ci.proto";
import "pkg/protocol/core/template/template.proto";
import "pkg/protocol/core/template-binding-relation/template_binding_relation.proto";
import "pkg/protocol/core/template-revision/template_revision.proto";
import "pkg/protocol/core/template-set/template_set.proto";
import "pkg/protocol/core/template-space/template_space.proto";
import "pkg/protocol/core/app-template-variable/app_template_variable.proto";
import "pkg/protocol/core/template-variable/template_variable.proto";
import "pkg/protocol/core/kv/kvs.proto";
import "pkg/protocol/core/released-kv/released_kv.proto";
import "google/api/annotations.proto";
import "google/api/visibility.proto";
import "google/protobuf/struct.proto";

package pbcs;

option go_package = "github.com/TencentBlueKing/bk-bcs/bcs-services/bcs-bscp/pkg/protocol/config-server;pbcs";

service Config {
  option (google.api.api_visibility).restriction = "BKAPIGW";
  rpc CreateApp(CreateAppReq) returns (CreateAppResp) {
    option (google.api.http) = {
      post: "/api/v1/config/create/app/app/biz_id/{biz_id}"
      body: "*"
    };
  }
  rpc UpdateApp(UpdateAppReq) returns (pbapp.App) {
    option (google.api.http) = {
      put: "/api/v1/config/update/app/app/app_id/{id}/biz_id/{biz_id}"
      body: "*"
    };
  }
  rpc DeleteApp(DeleteAppReq) returns (DeleteAppResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/delete/app/app/app_id/{id}/biz_id/{biz_id}"
    };
  }
  rpc GetApp(GetAppReq) returns (pbapp.App) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}"
    };
  }
  rpc GetAppByName(GetAppByNameReq) returns (pbapp.App) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/query/name/{app_name}"
    };
  }

  // 获取用户有权限的 spaces 所有的 apps
  rpc ListAppsRest(ListAppsRestReq) returns (ListAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps"
    };
  }
  // 按 space 查询 app 信息
  rpc ListAppsBySpaceRest(ListAppsBySpaceRestReq) returns (ListAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/list/app/app/biz_id/{biz_id}"
    };
  }

  rpc CreateConfigItem(CreateConfigItemReq) returns (CreateConfigItemResp) {
    option (google.api.http) = {
      post: "/api/v1/config/create/config_item/config_item/app_id/{app_id}/"
            "biz_id/{biz_id}"
      body: "*"
    };
  }
  rpc BatchUpsertConfigItems(BatchUpsertConfigItemsReq) returns (BatchUpsertConfigItemsResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items"
      body: "*"
    };
  }
  rpc UpdateConfigItem(UpdateConfigItemReq) returns (UpdateConfigItemResp) {
    option (google.api.http) = {
      put: "/api/v1/config/update/config_item/config_item/config_item_id/{id}/"
           "app_id/{app_id}/biz_id/{biz_id}"
      body: "*"
    };
  }
  rpc DeleteConfigItem(DeleteConfigItemReq) returns (DeleteConfigItemResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/delete/config_item/config_item/config_item_id/"
              "{id}/app_id/{app_id}/biz_id/{biz_id}"
    };
  }
  rpc BatchDeleteConfigItems(BatchDeleteAppResourcesReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items/"
            "batch_delete"
      body: "*"
    };
  }
  rpc UnDeleteConfigItem(UnDeleteConfigItemReq) returns (UnDeleteConfigItemResp) {
    option (google.api.http) = {
      post: "/api/v1/config/undelete/config_item/config_item/config_item_id/"
            "{id}/app_id/{app_id}/biz_id/{biz_id}"
    };
  }
  rpc UndoConfigItem(UndoConfigItemReq) returns (UndoConfigItemResp) {
    option (google.api.http) = {
      post: "/api/v1/config/undo/config_item/config_item/config_item_id/{id}/"
            "app_id/{app_id}/biz_id/{biz_id}"
    };
  }
  rpc GetConfigItem(GetConfigItemReq) returns (GetConfigItemResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items/"
           "{config_item_id}"
    };
  }
  rpc GetReleasedConfigItem(GetReleasedConfigItemReq) returns (GetReleasedConfigItemResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "config_items/{config_item_id}"
    };
  }
  rpc ListConfigItems(ListConfigItemsReq) returns (ListConfigItemsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items"
      body: "*"
    };
  }
  rpc ListReleasedConfigItems(ListReleasedConfigItemsReq) returns (ListReleasedConfigItemsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "config_items"
    };
  }
  rpc ListConfigItemCount(ListConfigItemCountReq) returns (ListConfigItemCountResp) {
    option (google.api.http) = {
      post: "/api/v1/config/config_item_count/biz_id/{biz_id}"
      body: "*"
    };
  }
  rpc ListConfigItemByTuple(ListConfigItemByTupleReq) returns (ListConfigItemByTupleResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items/tuple"
      body: "*"
    };
  }

  // ReleasedKv
  rpc GetReleasedKv(GetReleasedKvReq) returns (GetReleasedKvResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "kvs/{key}"
    };
  }
  rpc ListReleasedKvs(ListReleasedKvsReq) returns (ListReleasedKvsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "kvs"
    };
  }

  rpc UpdateConfigHook(UpdateConfigHookReq) returns (UpdateConfigHookResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_hooks"
      body: "*"
    };
  }

  rpc CreateRelease(CreateReleaseReq) returns (CreateReleaseResp) {
    option (google.api.http) = {
      post: "/api/v1/config/create/release/release/app_id/{app_id}/biz_id/"
            "{biz_id}"
      body: "*"
    };
  }
  rpc ListReleases(ListReleasesReq) returns (ListReleasesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases"
    };
  }
  rpc GetReleaseByName(GetReleaseByNameReq) returns (pbrelease.Release) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/query/name/"
           "{release_name}"
    };
  }
  rpc GetRelease(GetReleaseReq) returns (pbrelease.Release) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}"
    };
  }
  rpc DeprecateRelease(DeprecateReleaseReq) returns (DeprecateReleaseResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "deprecate"
    };
  }
  rpc UnDeprecateRelease(UnDeprecateReleaseReq) returns (UnDeprecateReleaseResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "undeprecate"
      body: "*"
    };
  }
  rpc DeleteRelease(DeleteReleaseReq) returns (DeleteReleaseResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}"
    };
  }
  rpc CheckReleaseName(CheckReleaseNameReq) returns (CheckReleaseNameResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/app_id/{app_id}/release/{name}/check"
    };
  }

  rpc CreateHook(CreateHookReq) returns (CreateHookResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/hooks"
      body: "*"
    };
  }
  rpc DeleteHook(DeleteHookReq) returns (DeleteHookResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}"
    };
  }
  rpc BatchDeleteHook(BatchDeleteHookReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/hooks/batch_delete"
      body: "*"
    };
  }
  rpc UpdateHook(UpdateHookReq) returns (UpdateHookResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}"
      body: "*"
    };
  }
  rpc ListHooks(ListHooksReq) returns (ListHooksResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks"
    };
  }
  rpc ListHookTags(ListHookTagsReq) returns (ListHookTagsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hook_tags"
    };
  }
  rpc GetHook(GetHookReq) returns (GetHookResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}"
    };
  }

  rpc CreateHookRevision(CreateHookRevisionReq) returns (CreateHookRevisionResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions"
      body: "*"
    };
  }
  rpc ListHookRevisions(ListHookRevisionsReq) returns (ListHookRevisionsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions"
    };
  }
  rpc DeleteHookRevision(DeleteHookRevisionReq) returns (DeleteHookRevisionResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions/"
              "{revision_id}"
    };
  }
  rpc PublishHookRevision(PublishHookRevisionReq) returns (PublishHookRevisionResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions/"
           "{revision_id}/publish"
    };
  }
  rpc GetHookRevision(GetHookRevisionReq) returns (pbhr.HookRevision) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions/"
           "{revision_id}"
    };
  }
  rpc UpdateHookRevision(UpdateHookRevisionReq) returns (UpdateHookRevisionResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions/"
           "{revision_id}"
      body: "*"
    };
  }
  rpc ListHookReferences(ListHookReferencesReq) returns (ListHookReferencesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/references"
    };
  }
  rpc ListHookRevisionReferences(ListHookRevisionReferencesReq) returns (ListHookRevisionReferencesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/hooks/{hook_id}/hook_revisions/"
           "{revision_id}/references"
    };
  }
  rpc GetReleaseHook(GetReleaseHookReq) returns (GetReleaseHookResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "hooks"
    };
  }

  rpc CreateTemplateSpace(CreateTemplateSpaceReq) returns (CreateTemplateSpaceResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces"
      body: "*"
    };
  }
  rpc DeleteTemplateSpace(DeleteTemplateSpaceReq) returns (DeleteTemplateSpaceResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}"
    };
  }
  rpc UpdateTemplateSpace(UpdateTemplateSpaceReq) returns (UpdateTemplateSpaceResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}"
      body: "*"
    };
  }
  rpc ListTemplateSpaces(ListTemplateSpacesReq) returns (ListTemplateSpacesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces"
    };
  }
  // GetAllBizsOfTmplSpaces called only by system itself
  rpc GetAllBizsOfTmplSpaces(pbbase.EmptyReq) returns (GetAllBizsOfTmplSpacesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/template_spaces/bizs"
    };
  }
  // CreateDefaultTmplSpace called only by system itself
  rpc CreateDefaultTmplSpace(CreateDefaultTmplSpaceReq) returns (CreateDefaultTmplSpaceResp) {
    option (google.api.http) = {
      post: "/api/v1/config/template_spaces/default"
      body: "*"
    };
  }
  rpc ListTmplSpacesByIDs(ListTmplSpacesByIDsReq) returns (ListTmplSpacesByIDsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/list_by_ids"
      body: "*"
    };
  }

  rpc CreateTemplate(CreateTemplateReq) returns (CreateTemplateResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates"
      body: "*"
    };
  }
  rpc DeleteTemplate(DeleteTemplateReq) returns (DeleteTemplateResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/template_spaces/"
              "{template_space_id}/templates/{template_id}"
    };
  }
  rpc BatchDeleteTemplate(BatchDeleteTemplateReq) returns (BatchDeleteTemplateResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/template_spaces/"
              "{template_space_id}/templates"
    };
  }
  rpc UpdateTemplate(UpdateTemplateReq) returns (UpdateTemplateResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}"
      body: "*"
    };
  }
  rpc ListTemplates(ListTemplatesReq) returns (ListTemplatesResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/list"
      body: "*"
    };
  }
  rpc BatchUpsertTemplates(BatchUpsertTemplatesReq) returns (BatchUpsertTemplatesResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/batch_upsert_templates"
      body: "*"
    };
  }
  rpc BatchUpdateTemplatePermissions(BatchUpdateTemplatePermissionsReq) returns (BatchUpdateTemplatePermissionsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_set/{template_set_id}/templates/batch_update_templates_permissions"
      body: "*"
    };
  }
  rpc AddTmplsToTmplSets(AddTmplsToTmplSetsReq) returns (AddTmplsToTmplSetsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/template_set/{template_set_id}/"
            "templates/add_to_template_sets"
      body: "*"
    };
  }
  rpc DeleteTmplsFromTmplSets(DeleteTmplsFromTmplSetsReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/delete_from_template_sets"
      body: "*"
    };
  }
  rpc ListTemplatesByIDs(ListTemplatesByIDsReq) returns (ListTemplatesByIDsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/templates/list_by_ids"
      body: "*"
    };
  }
  rpc ListTemplatesNotBound(ListTemplatesNotBoundReq) returns (ListTemplatesNotBoundResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/list_not_bound"
    };
  }
  rpc ListTemplateByTuple(ListTemplateByTupleReq) returns (ListTemplateByTupleResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/tuple"
      body: "*"
    };
  }
  rpc ListTmplsOfTmplSet(ListTmplsOfTmplSetReq) returns (ListTmplsOfTmplSetResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "template_sets/{template_set_id}/templates"
      body: "*"
    };
  }
  rpc ListTemplateSetsAndRevisions(ListTemplateSetsAndRevisionsReq) returns (ListTemplateSetsAndRevisionsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_sets/{template_set_id}/template_revisions"
    };
  }

  rpc CreateTemplateRevision(CreateTemplateRevisionReq) returns (CreateTemplateRevisionResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/{template_id}/template_revisions"
      body: "*"
    };
  }
  rpc UpdateTemplateRevision(UpdateTemplateRevisionReq) returns (UpdateTemplateRevisionResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/template_revisions"
      body: "*"
    };
  }
  rpc ListTemplateRevisions(ListTemplateRevisionsReq) returns (ListTemplateRevisionsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/template_revisions"
    };
  }
  rpc GetTemplateRevision(GetTemplateRevisionReq) returns (GetTemplateRevisionResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/templates/{template_id}/template_revisions"
    };
  }
  /* 暂时不对外开发（删除模版后，服务引用的latest版本会回退到上一个老版本）
  rpc DeleteTemplateRevision(DeleteTemplateRevisionReq) returns
(DeleteTemplateRevisionResp) {

option (google.api.http) = {
          delete :
  "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/templates/{template_id}/template_revisions/{template_revision_id}"
      };
  }
  */
  rpc ListTemplateRevisionsByIDs(ListTemplateRevisionsByIDsReq) returns (ListTemplateRevisionsByIDsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_revisions/list_by_ids"
      body: "*"
    };
  }
  rpc ListTmplRevisionNamesByTmplIDs(ListTmplRevisionNamesByTmplIDsReq) returns (ListTmplRevisionNamesByTmplIDsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_revisions/"
            "list_names_by_template_ids"
      body: "*"
    };
  }

  rpc CreateTemplateSet(CreateTemplateSetReq) returns (CreateTemplateSetResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "template_sets"
      body: "*"
    };
  }
  rpc DeleteTemplateSet(DeleteTemplateSetReq) returns (DeleteTemplateSetResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/template_spaces/"
              "{template_space_id}/template_sets/{template_set_id}"
    };
  }
  rpc UpdateTemplateSet(UpdateTemplateSetReq) returns (UpdateTemplateSetResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "template_sets/{template_set_id}"
      body: "*"
    };
  }
  rpc ListTemplateSets(ListTemplateSetsReq) returns (ListTemplateSetsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "template_sets"
    };
  }
  rpc ListAppTemplateSets(ListAppTemplateSetsReq) returns (ListAppTemplateSetsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_sets"
    };
  }
  rpc ListTemplateSetsByIDs(ListTemplateSetsByIDsReq) returns (ListTemplateSetsByIDsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_sets/list_by_ids"
      body: "*"
    };
  }
  rpc ListTmplSetsOfBiz(ListTmplSetsOfBizReq) returns (ListTmplSetsOfBizResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_sets/list_all_of_biz"
    };
  }

  rpc CreateAppTemplateBinding(CreateAppTemplateBindingReq) returns (CreateAppTemplateBindingResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings"
      body: "*"
    };
  }
  rpc DeleteAppTemplateBinding(DeleteAppTemplateBindingReq) returns (DeleteAppTemplateBindingResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/"
              "{binding_id}"
    };
  }
  rpc UpdateAppTemplateBinding(UpdateAppTemplateBindingReq) returns (UpdateAppTemplateBindingResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/"
           "{binding_id}"
      body: "*"
    };
  }
  rpc ListAppTemplateBindings(ListAppTemplateBindingsReq) returns (ListAppTemplateBindingsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings"
    };
  }
  rpc ListAppBoundTmplRevisions(ListAppBoundTmplRevisionsReq) returns (ListAppBoundTmplRevisionsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_revisions"
    };
  }
  rpc ListReleasedAppBoundTmplRevisions(ListReleasedAppBoundTmplRevisionsReq)
      returns (ListReleasedAppBoundTmplRevisionsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "template_revisions"
    };
  }
  rpc GetReleasedAppBoundTmplRevision(GetReleasedAppBoundTmplRevisionReq)
      returns (GetReleasedAppBoundTmplRevisionResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "template_revisions/{template_revision_id}"
    };
  }
  rpc UpdateAppBoundTmplRevisions(UpdateAppBoundTmplRevisionsReq) returns (UpdateAppBoundTmplRevisionsResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/"
           "{binding_id}/template_revisions"
      body: "*"
    };
  }
  rpc DeleteAppBoundTmplSets(DeleteAppBoundTmplSetsReq) returns (DeleteAppBoundTmplSetsResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/"
              "{binding_id}/template_sets"
    };
  }
  rpc RemoveAppBoundTmplSet(RemoveAppBoundTmplSetReq) returns (RemoveAppBoundTmplSetResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_set/{template_set_id}"
    };
  }
  rpc CheckAppTemplateBinding(CheckAppTemplateBindingReq) returns (CheckAppTemplateBindingResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/"
            "conflict_check"
      body: "*"
    };
  }
  rpc ImportFromTemplateSetToApp(ImportFromTemplateSetToAppReq) returns (ImportFromTemplateSetToAppResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_bindings/import_template_set"
      body: "*"
    };
  }

  rpc ListTmplBoundCounts(ListTmplBoundCountsReq) returns (ListTmplBoundCountsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/bound_counts"
      body: "*"
    };
  }
  rpc ListTmplRevisionBoundCounts(ListTmplRevisionBoundCountsReq) returns (ListTmplRevisionBoundCountsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "templates/{template_id}/template_revisions/bound_counts"
      body: "*"
    };
  }
  rpc ListTmplSetBoundCounts(ListTmplSetBoundCountsReq) returns (ListTmplSetBoundCountsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "template_sets/bound_counts"
      body: "*"
    };
  }
  rpc ListTmplBoundUnnamedApps(ListTmplBoundUnnamedAppsReq) returns (ListTmplBoundUnnamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/bound_unnamed_app_details"
    };
  }
  rpc ListTmplBoundNamedApps(ListTmplBoundNamedAppsReq) returns (ListTmplBoundNamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/bound_named_app_details"
    };
  }
  rpc ListTmplBoundTmplSets(ListTmplBoundTmplSetsReq) returns (ListTmplBoundTmplSetsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/bound_template_set_details"
    };
  }
  rpc ListMultiTmplBoundTmplSets(ListMultiTmplBoundTmplSetsReq) returns (ListMultiTmplBoundTmplSetsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/bound_template_set_details"
    };
  }
  rpc ListTmplRevisionBoundUnnamedApps(ListTmplRevisionBoundUnnamedAppsReq)
      returns (ListTmplRevisionBoundUnnamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/template_revisions/{template_revision_id}/"
           "bound_unnamed_app_details"
    };
  }
  rpc ListTmplRevisionBoundNamedApps(ListTmplRevisionBoundNamedAppsReq) returns (ListTmplRevisionBoundNamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/template_revisions/{template_revision_id}/"
           "bound_named_app_details"
    };
  }
  rpc ListTmplSetBoundUnnamedApps(ListTmplSetBoundUnnamedAppsReq) returns (ListTmplSetBoundUnnamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "template_sets/{template_set_id}/bound_unnamed_app_details"
    };
  }
  rpc ListMultiTmplSetBoundUnnamedApps(ListMultiTmplSetBoundUnnamedAppsReq)
      returns (ListMultiTmplSetBoundUnnamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "template_sets/bound_unnamed_app_details"
    };
  }
  rpc CheckTemplateSetReferencesApps(CheckTemplateSetReferencesAppsReq) returns (CheckTemplateSetReferencesAppsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
            "template_sets/check_template_set_references_apps"
      body: "*"
    };
  }
  rpc ListTmplSetBoundNamedApps(ListTmplSetBoundNamedAppsReq) returns (ListTmplSetBoundNamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "template_sets/{template_set_id}/bound_named_app_details"
    };
  }
  rpc ListLatestTmplBoundUnnamedApps(ListLatestTmplBoundUnnamedAppsReq) returns (ListLatestTmplBoundUnnamedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_spaces/{template_space_id}/"
           "templates/{template_id}/latest/bound_unnamed_app_details"
    };
  }

  rpc CreateTemplateVariable(CreateTemplateVariableReq) returns (CreateTemplateVariableResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_variables"
      body: "*"
    };
  }
  rpc DeleteTemplateVariable(DeleteTemplateVariableReq) returns (DeleteTemplateVariableResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/template_variables/"
              "{template_variable_id}"
    };
  }
  rpc BatchDeleteTemplateVariable(BatchDeleteBizResourcesReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_variables/batch_delete"
      body: "*"
    };
  }
  rpc UpdateTemplateVariable(UpdateTemplateVariableReq) returns (UpdateTemplateVariableResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/template_variables/"
           "{template_variable_id}"
      body: "*"
    };
  }
  rpc ListTemplateVariables(ListTemplateVariablesReq) returns (ListTemplateVariablesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/template_variables"
    };
  }
  rpc ImportTemplateVariables(ImportTemplateVariablesReq) returns (ImportTemplateVariablesResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/template_variables/import"
      body: "*"
    };
  }

  rpc ExtractAppTmplVariables(ExtractAppTmplVariablesReq) returns (ExtractAppTmplVariablesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/"
           "extract_template_variables"
    };
  }
  rpc GetAppTmplVariableRefs(GetAppTmplVariableRefsReq) returns (GetAppTmplVariableRefsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/"
           "template_variables_references"
    };
  }
  rpc GetReleasedAppTmplVariableRefs(GetReleasedAppTmplVariableRefsReq) returns (GetReleasedAppTmplVariableRefsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "template_variables_references"
    };
  }
  rpc UpdateAppTmplVariables(UpdateAppTmplVariablesReq) returns (UpdateAppTmplVariablesResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_variables"
      body: "*"
    };
  }
  rpc ListAppTmplVariables(ListAppTmplVariablesReq) returns (ListAppTmplVariablesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/template_variables"
    };
  }
  rpc ListReleasedAppTmplVariables(ListReleasedAppTmplVariablesReq) returns (ListReleasedAppTmplVariablesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/releases/{release_id}/"
           "template_variables"
    };
  }

  rpc CreateGroup(CreateGroupReq) returns (CreateGroupResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/groups"
      body: "*"
    };
  }
  rpc DeleteGroup(DeleteGroupReq) returns (DeleteGroupResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/groups/{group_id}"
    };
  }
  rpc BatchDeleteGroups(BatchDeleteBizResourcesReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/groups/batch_delete"
      body: "*"
    };
  }
  rpc UpdateGroup(UpdateGroupReq) returns (UpdateGroupResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/groups/{group_id}"
      body: "*"
    };
  }
  rpc ListAllGroups(ListAllGroupsReq) returns (ListAllGroupsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/groups"
    };
  }
  rpc ListAppGroups(ListAppGroupsReq) returns (ListAppGroupsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/groups"
    };
  }
  rpc ListGroupReleasedApps(ListGroupReleasedAppsReq) returns (ListGroupReleasedAppsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/groups/{group_id}/released_apps"
    };
  }
  rpc GetGroupByName(GetGroupByNameReq) returns (pbgroup.Group) {
    option (google.api.method_visibility).restriction = "BKAPIGW";
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/groups/query/name/{group_name}"
    };
  }

  rpc Publish(PublishReq) returns (PublishResp) {
    option (google.api.method_visibility).restriction = "BKAPIGW";
    option (google.api.http) = {
      post: "/api/v1/config/update/strategy/publish/publish/release_id/"
            "{release_id}/app_id/{app_id}/biz_id/{biz_id}"
      body: "*"
    };
  }

  rpc GenerateReleaseAndPublish(GenerateReleaseAndPublishReq) returns (PublishResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/publish"
      body: "*"
    };
  }

  rpc CreateCredentials(CreateCredentialReq) returns (CreateCredentialResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz_id/{biz_id}/credentials"
      body: "*"
    };
  }
  rpc ListCredentials(ListCredentialsReq) returns (ListCredentialsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/credentials"
    };
  }
  rpc DeleteCredential(DeleteCredentialsReq) returns (DeleteCredentialsResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz_id/{biz_id}/credential"
    };
  }
  rpc UpdateCredential(UpdateCredentialsReq) returns (UpdateCredentialsResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz_id/{biz_id}/credential"
      body: "*"
    };
  }
  rpc CheckCredentialName(CheckCredentialNameReq) returns (CheckCredentialNameResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/credential/{credential_name}/check"
    };
  }

  rpc ListCredentialScopes(ListCredentialScopesReq) returns (ListCredentialScopesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/credential/{credential_id}/scopes"
    };
  }
  rpc UpdateCredentialScope(UpdateCredentialScopeReq) returns (UpdateCredentialScopeResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz_id/{biz_id}/credential/{credential_id}/scope"
      body: "*"
    };
  }
  rpc CredentialScopePreview(CredentialScopePreviewReq) returns (CredentialScopePreviewResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/credential/scope/preview"
    };
  }

  rpc CreateKv(CreateKvReq) returns (CreateKvResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs"
      body: "*"
    };
  };
  rpc UpdateKv(UpdateKvReq) returns (UpdateKvResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/{key}"
      body: "*"
    };
  };
  rpc ListKvs(ListKvsReq) returns (ListKvsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/list"
      body: "*"
    };
  };
  rpc DeleteKv(DeleteKvReq) returns (DeleteKvResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/{id}"
    };
  };
  rpc BatchDeleteKv(BatchDeleteAppResourcesReq) returns (BatchDeleteResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/batch_delete"
      body: "*"
    };
  };
  rpc BatchUpsertKvs(BatchUpsertKvsReq) returns (BatchUpsertKvsResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs"
      body: "*"
    };
  };
  rpc UnDeleteKv(UnDeleteKvReq) returns (UnDeleteKvResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/{key}/undelete"
    };
  };
  rpc UndoKv(UndoKvReq) returns (UndoKvResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/{key}/undo"
    };
  };
  rpc ImportKvs(ImportKvsReq) returns (ImportKvsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/{format}/import"
      body: "*"
    };
  };

  rpc ListClients(ListClientsReq) returns (ListClientsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients"
      body: "*"
    };
  };

  rpc ListClientEvents(ListClientEventsReq) returns (ListClientEventsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_events/"
            "{client_id}"
      body: "*"
    };
  };

  rpc RetryClients(RetryClientsReq) returns (RetryClientsResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/retry"
      body: "*"
    };
  };

  // client query related interface
  rpc ListClientQuerys(ListClientQuerysReq) returns (ListClientQuerysResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_querys"
    };
  };
  rpc CreateClientQuery(CreateClientQueryReq) returns (CreateClientQueryResp) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_querys"
      body: "*"
    };
  };
  rpc UpdateClientQuery(UpdateClientQueryReq) returns (UpdateClientQueryResp) {
    option (google.api.http) = {
      put: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_querys/{id}"
      body: "*"
    };
  };
  rpc DeleteClientQuery(DeleteClientQueryReq) returns (DeleteClientQueryResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_querys/{id}"
    };
  };
  rpc CheckClientQueryName(CheckClientQueryNameReq) returns (CheckClientQueryNameResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/client_querys/"
           "check_exists"
    };
  };

  // client chart related interface
  rpc ClientConfigVersionStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "config_version_statistics"
      body: "*"
    };
  };
  rpc ClientPullTrendStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "pull_trend_statistics"
      body: "*"
    };
  };
  rpc ClientPullStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/pull_statistics"
      body: "*"
    };
  };
  rpc ClientLabelStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "label_statistics"
      body: "*"
    };
  };
  rpc ClientAnnotationStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "annotation_statistics"
      body: "*"
    };
  };
  rpc ClientVersionStatistics(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "version_statistics"
      body: "*"
    };
  };
  rpc ListClientLabelAndAnnotation(ListClientLabelAndAnnotationReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "labels_and_annotations"
      body: "*"
    };
  };
  rpc ClientSpecificFailedReason(pbclient.ClientCommonReq) returns (google.protobuf.Struct) {
    option (google.api.http) = {
      post: "/api/v1/config/biz/{biz_id}/apps/{app_id}/clients/"
            "specific_failed_reason"
      body: "*"
    };
  }

  // config item compare conflicts related interface
  rpc CompareConfigItemConflicts(CompareConfigItemConflictsReq) returns (CompareConfigItemConflictsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/config_items/"
           "compare_conflicts"
    };
  }
  rpc CompareKvConflicts(CompareKvConflictsReq) returns (CompareKvConflictsResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/kvs/compare_conflicts"
    };
  }

  // 获取模板和非模板配置项数量
  rpc GetTemplateAndNonTemplateCICount(GetTemplateAndNonTemplateCICountReq)
      returns (GetTemplateAndNonTemplateCICountResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz_id/{biz_id}/apps/{app_id}/config_items/count"
    };
  }

  // user privileges related interface
  rpc ListUserPrivileges(ListUserPrivilegesReq) returns (ListUserPrivilegesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/user_privileges"
    };
  };
  rpc DeleteUserPrivilege(DeleteUserPrivilegesReq) returns (DeleteUserPrivilegesResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/user_privileges/{id}"
    };
  };

  // user group privileges related interface
  rpc ListUserGroupPrivileges(ListUserPrivilegesReq) returns (ListUserPrivilegesResp) {
    option (google.api.http) = {
      get: "/api/v1/config/biz/{biz_id}/apps/{app_id}/user_group_privileges"
    };
  };
  rpc DeleteUserGroupPrivilege(DeleteUserPrivilegesReq) returns (DeleteUserPrivilegesResp) {
    option (google.api.http) = {
      delete: "/api/v1/config/biz/{biz_id}/apps/{app_id}/user_group_privileges/{id}"
    };
  };
}

message UpdateCredentialScopeReq {
  uint32 biz_id = 1;
  uint32 credential_id = 2;
  repeated pbcrs.CredentialScopeSpec add_scope = 3;
  repeated pbcrs.UpdateScopeSpec alter_scope = 4;
  repeated uint32 del_id = 5;
}

message UpdateCredentialScopeResp {}

message CredentialScopePreviewReq {
  uint32 biz_id = 1;
  string app_name = 2;
  string scope = 3;
  string search_value = 4;
  uint32 start = 5;
  uint32 limit = 6;
}

message CredentialScopePreviewResp {
  message Detail {
    string name = 1;
    string path = 2;
  }
  uint32 count = 1;
  repeated Detail details = 2;
}

message ListCredentialScopesReq {
  uint32 biz_id = 1;
  uint32 credential_id = 2;
}

message ListCredentialScopesResp {
  uint32 count = 1;
  repeated pbcrs.CredentialScopeList details = 2;
}

message EnableCredentialsReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  bool enable = 3;
}

message EnableCredentialsResp {}

message DeleteCredentialsReq {
  uint32 id = 1;
  uint32 biz_id = 2;
}

message DeleteCredentialsResp {}
message UpdateCredentialsReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  bool enable = 3;
  string name = 4;
  string memo = 5;
}

message UpdateCredentialsResp {}

message CheckCredentialNameReq {
  uint32 biz_id = 1;
  string credential_name = 2;
}

message CheckCredentialNameResp {
  bool exist = 1;
}

message ListCredentialsReq {
  uint32 biz_id = 1;
  string searchKey = 2;
  uint32 start = 3;
  uint32 limit = 4;
  string top_ids = 5;
  bool all = 6;
  optional bool enable = 7;
}

message ListCredentialsResp {
  uint32 count = 1;
  repeated pbcredential.CredentialList details = 2;
}

message CreateCredentialReq {
  string memo = 1;
  string name = 2;
  uint32 biz_id = 3;
  repeated string scope = 4;
}

message CreateCredentialResp {
  uint32 id = 1;
}

message CreateAppReq {
  uint32 biz_id = 1;
  string name = 2;
  string config_type = 3;  // config_type is enum type, source resource
                           // reference: pkg/dal/table/app.go
  string memo = 4;
  string alias = 5;
  string data_type = 6;  // data_type is enum type, source resource reference:
                         // pkg/dal/table/app.go
}

message CreateAppResp {
  uint32 id = 1;
}

message UpdateAppReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  string name = 3;
  string memo = 4;
  string alias = 5;
  string data_type = 6;
}

message DeleteAppReq {
  uint32 id = 1;
  uint32 biz_id = 2;
}

message DeleteAppResp {}

message GetAppReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message GetAppByNameReq {
  uint32 biz_id = 1;
  string app_name = 2;
}

message ListAppsRestReq {
  uint32 biz_id = 1;
  uint32 start = 2;
  uint32 limit = 3;
  string operator = 4;
  string name = 5;
}

message ListAppsBySpaceRestReq {
  uint32 biz_id = 1;
  uint32 start = 2;
  uint32 limit = 3;
  string operator = 4;
  string name = 5;
  bool all = 6;
}

message ListAppsResp {
  uint32 count = 1;
  repeated pbapp.App details = 2;
}

message CreateConfigItemReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string name = 3;
  string path = 4;
  string file_type = 5;  // file_type is enum type, source resource reference:
                         // pkg/dal/table/config_item.go
  string file_mode = 6;  // file_mode is enum type, source resource reference:
                         // pkg/dal/table/config_item.go
  string memo = 7;
  string user = 8;
  string user_group = 9;
  string privilege = 10;
  string sign = 11;
  uint64 byte_size = 12;
  uint32 uid = 13;
  uint32 gid = 14;
}

message BatchUpsertConfigItemsReq {
  message ConfigItem {
    string name = 1;
    string path = 2;
    string file_type = 3;  // file_type is enum type, source resource reference:
                           // pkg/dal/table/config_item.go
    string file_mode = 4;  // file_mode is enum type, source resource reference:
                           // pkg/dal/table/config_item.go
    string memo = 5;
    string user = 6;
    string user_group = 7;
    string privilege = 8;
    string sign = 9;
    uint64 byte_size = 10;
    string md5 = 11;
    uint32 uid = 12;
    uint32 gid = 13;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated ConfigItem items = 3;
  bool replace_all = 4;
  repeated pbtv.TemplateVariableSpec variables = 5;  // 非配置模板和模板配置变量
  message TemplateBinding {
    uint32 template_space_id = 1;
    pbatb.TemplateBinding template_binding = 2;
  }
  repeated TemplateBinding bindings = 6;  // 绑定的套餐
}

message BatchUpsertConfigItemsResp {
  repeated uint32 ids = 1;
}

message CreateConfigItemResp {
  uint32 id = 1;
}

message UpdateConfigItemReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
  string name = 4;
  string path = 5;
  string file_type = 6;  // file_type is enum type, source resource reference:
                         // pkg/dal/table/config_item.go
  string file_mode = 7;  // file_mode is enum type, source resource reference:
                         // pkg/dal/table/config_item.go
  string memo = 8;
  string user = 9;
  string user_group = 10;
  string privilege = 11;
  string sign = 12;
  uint64 byte_size = 13;
  uint32 uid = 14;
  uint32 gid = 15;
}

message UpdateConfigItemResp {}

message DeleteConfigItemReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
}

message DeleteConfigItemResp {}

message UnDeleteConfigItemReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
}

message UnDeleteConfigItemResp {}

message UndoConfigItemReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
}

message UndoConfigItemResp {}

message GetConfigItemReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 config_item_id = 3;
}

message GetConfigItemResp {
  pbci.ConfigItem config_item = 1;
  pbcontent.ContentSpec content = 2;
}

message GetReleasedConfigItemReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  uint32 config_item_id = 4;
}

message GetReleasedConfigItemResp {
  pbrci.ReleasedConfigItem config_item = 1;
}

message ListConfigItemsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string search_fields = 3;
  string search_value = 4;
  uint32 start = 5;
  uint32 limit = 6;
  repeated uint32 ids = 7;
  bool all = 8;
  bool with_status = 9;
  // ADD、REVISE、DELETE、UNCHANGE
  repeated string status = 10;
}

message ListConfigItemsResp {
  uint32 count = 1;
  repeated pbci.ConfigItem details = 2;
  uint32 conflict_number = 3;
}

message ListReleasedConfigItemsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  string search_fields = 4;
  string search_value = 5;
  uint32 start = 6;
  uint32 limit = 7;
  bool all = 8;
}

message ListReleasedConfigItemsResp {
  uint32 count = 1;
  repeated pbrci.ReleasedConfigItem details = 2;
}

message ListConfigItemCountReq {
  uint32 biz_id = 1;
  repeated uint32 app_id = 2;
}

message ListConfigItemCountResp {
  repeated pbci.ListConfigItemCounts details = 1;
}

message ListConfigItemByTupleReq {
  message Item {
    string name = 1;
    string path = 2;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated Item items = 3;
}

message ListConfigItemByTupleResp {
  repeated pbci.ConfigItem details = 1;
}

message GetReleasedKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  string key = 4;
}

message GetReleasedKvResp {
  pbrkv.ReleasedKv kv = 1;
}

message ListReleasedKvsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
  string search_key = 7;
  repeated string key = 8;
  repeated string kv_type = 9;
  string sort = 10;
  string order = 11;
}

message ListReleasedKvsResp {
  uint32 count = 1;
  repeated pbrkv.ReleasedKv details = 2;
}

message UpdateConfigHookReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 pre_hook_id = 3;
  uint32 post_hook_id = 4;
}

message UpdateConfigHookResp {}

message CreateReleaseReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string name = 3;
  string memo = 4;
  repeated pbtv.TemplateVariableSpec variables = 5;
}

message CreateReleaseResp {
  uint32 id = 1;
}

message CheckReleaseNameReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string name = 3;
}

message CheckReleaseNameResp {
  bool exist = 1;
}

message ListReleasesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string searchKey = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
  bool deprecated = 7;
}

message ListReleasesResp {
  uint32 count = 1;
  repeated pbrelease.Release details = 2;
}

message GetReleaseByNameReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string release_name = 3;
}

message GetReleaseReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message DeprecateReleaseReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message DeprecateReleaseResp {}

message UnDeprecateReleaseReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message UnDeprecateReleaseResp {}

message DeleteReleaseReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message DeleteReleaseResp {}

message CreateHookReq {
  uint32 biz_id = 1;
  string name = 2;
  string type = 3;
  repeated string tags = 4;
  string memo = 5;
  string content = 6;
  string revision_name = 7;
}

message CreateHookResp {
  uint32 id = 1;
}

message DeleteHookReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  bool force = 3;
}

message DeleteHookResp {}

message BatchDeleteHookReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
  bool force = 3;
  bool exclusion_operation = 4;
}

message UpdateHookReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  repeated string tags = 3;
  string memo = 4;
}

message UpdateHookResp {}

message ListHooksReq {
  uint32 biz_id = 1;
  string name = 2;
  string tag = 3;
  bool all = 4;
  bool not_tag = 5;
  uint32 start = 6;
  uint32 limit = 7;
  string searchKey = 8;
}

message ListHooksResp {
  message Detail {
    pbhook.Hook hook = 1;
    uint32 bound_num = 2;
    bool confirm_delete = 3;
    uint32 published_revision_id = 4;
  }
  uint32 count = 1;
  repeated Detail details = 2;
  uint32 exclusion_count = 3;  // 排除禁用的数量
}

message ListHookTagsReq {
  uint32 biz_id = 1;
}

message ListHookTagsResp {
  repeated pbhook.CountHookTags details = 1;
}

message CreateHookRevisionReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  string memo = 3;
  string content = 4;
  string name = 5;
}

message CreateHookRevisionResp {
  uint32 id = 1;
}

message ListHookRevisionsReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  string search_key = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
  string state = 7;
}

message ListHookRevisionsResp {
  message ListHookRevisionsData {
    pbhr.HookRevision hook_revision = 1;
    uint32 bound_num = 2;
    bool confirm_delete = 3;
  }
  uint32 count = 1;
  repeated ListHookRevisionsData details = 2;
}

message DeleteHookRevisionReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 revision_id = 3;
  bool force = 4;
}

message DeleteHookRevisionResp {}

message PublishHookRevisionReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 revision_id = 3;
}

message PublishHookRevisionResp {}

message GetHookReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
}

message GetHookResp {
  uint32 id = 1;
  GetHookInfoSpec spec = 2;
  pbhook.HookAttachment attachment = 3;
  pbbase.Revision revision = 4;
}

message GetHookInfoSpec {
  string name = 1;
  string type = 3;
  repeated string tags = 4;
  string memo = 5;
  message Releases {
    uint32 not_release_id = 1;
  }
  Releases releases = 8;
}

message GetHookRevisionReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 revision_id = 3;
}

message UpdateHookRevisionReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 revision_id = 3;
  string name = 4;
  string content = 5;
  string memo = 6;
}

message UpdateHookRevisionResp {}

message ListHookRevisionReferencesReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 revision_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  string searchKey = 6;
}

message ListHookRevisionReferencesResp {
  message Detail {
    uint32 revision_id = 1;
    string revision_name = 2;
    uint32 app_id = 3;
    string app_name = 4;
    uint32 release_id = 5;
    string release_name = 6;
    string type = 7;
    bool deprecated = 8;
  }
  uint32 count = 1;
  repeated Detail details = 2;
}

message ListHookReferencesReq {
  uint32 biz_id = 1;
  uint32 hook_id = 2;
  uint32 start = 3;
  uint32 limit = 4;
  string searchKey = 5;
}

message ListHookReferencesResp {
  message Detail {
    uint32 hook_revision_id = 1;
    string hook_revision_name = 2;
    uint32 app_id = 3;
    string app_name = 4;
    uint32 release_id = 5;
    string release_name = 6;
    string type = 7;
    bool deprecated = 8;
  }
  uint32 count = 1;
  repeated Detail details = 2;
}

message GetReleaseHookReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message GetReleaseHookResp {
  message Hook {
    uint32 hook_id = 1;
    string hook_name = 2;
    uint32 hook_revision_id = 3;
    string hook_revision_name = 4;
    string type = 5;
    string content = 7;
  }
  Hook pre_hook = 1;
  Hook post_hook = 2;
}

message CreateTemplateSpaceReq {
  uint32 biz_id = 1;
  string name = 2;
  string memo = 3;
}

message CreateTemplateSpaceResp {
  uint32 id = 1;
}

message UpdateTemplateSpaceReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string memo = 3;
}

message UpdateTemplateSpaceResp {}

message DeleteTemplateSpaceReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
}

message DeleteTemplateSpaceResp {}

message ListTemplateSpacesReq {
  uint32 biz_id = 1;
  string search_fields = 2;
  string search_value = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListTemplateSpacesResp {
  uint32 count = 1;
  repeated pbts.TemplateSpace details = 2;
}

message GetAllBizsOfTmplSpacesResp {
  repeated uint32 biz_ids = 1;
}

message CreateDefaultTmplSpaceReq {
  uint32 biz_id = 1;
}

message CreateDefaultTmplSpaceResp {
  uint32 id = 1;
}

message ListTmplSpacesByIDsReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
}

message ListTmplSpacesByIDsResp {
  repeated pbts.TemplateSpace details = 1;
}

message CreateTemplateReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string name = 3;
  string path = 4;
  string memo = 5;
  string revision_name = 6;
  string revision_memo = 7;
  string file_type = 8;  // file_type is enum type
  string file_mode = 9;  // file_mode is enum type
  string user = 10;
  string user_group = 11;
  string privilege = 12;
  string sign = 13;
  uint64 byte_size = 14;
  repeated uint32 template_set_ids = 15;
  uint32 uid = 16;
  uint32 gid = 17;
}

message CreateTemplateResp {
  uint32 id = 1;
}

message UpdateTemplateReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string memo = 4;
}

message UpdateTemplateResp {}

message DeleteTemplateReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  bool force = 4;
}

message DeleteTemplateResp {}

message BatchDeleteTemplateReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string template_ids = 3;
  bool force = 4;
  bool exclusion_operation = 5;
}

message BatchDeleteTemplateResp {}

message ListTemplatesReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string search_fields = 3;
  string search_value = 4;
  uint32 start = 5;
  uint32 limit = 6;
  repeated uint32 ids = 7;
  bool all = 8;
}

message ListTemplatesResp {
  uint32 count = 1;
  repeated pbtemplate.Template details = 2;
}

message BatchUpsertTemplatesReq {
  message Item {
    uint32 id = 1;
    string name = 2;
    string path = 3;
    string file_type = 4;  // file_type is enum type, source resource reference:
                           // pkg/dal/table/config_item.go
    string file_mode = 5;  // file_mode is enum type, source resource reference:
                           // pkg/dal/table/config_item.go
    string memo = 6;
    string user = 7;
    string user_group = 8;
    string privilege = 9;
    string sign = 10;
    uint64 byte_size = 11;
    string md5 = 12;
    uint32 uid = 13;
    uint32 gid = 14;
  }
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated Item items = 3;
  repeated uint32 template_set_ids = 4;
}

message BatchUpsertTemplatesResp {
  repeated uint32 ids = 1;
}

message BatchUpdateTemplatePermissionsReq {
  uint32 biz_id = 1;
  repeated uint32 template_ids = 2;
  string user = 3;
  string user_group = 4;
  string privilege = 5;
  repeated uint32 app_ids = 6;    // 服务ID
  bool exclusion_operation = 7;   // 是否排除操作
  uint32 template_set_id = 8;     // 套餐ID, 具体操作的哪个套餐
  bool no_set_specified = 9;      // 是否未指定套餐, 区分全部套餐和未指定套餐
  uint32 template_space_id = 10;  // 模板空间ID
}

message BatchUpdateTemplatePermissionsResp {
  repeated uint32 ids = 1;
}

message AddTmplsToTmplSetsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated uint32 template_ids = 3;
  repeated uint32 template_set_ids = 4;
  bool exclusion_operation = 5;
  uint32 template_set_id = 6;  // 套餐ID, 具体操作的哪个套餐
  bool no_set_specified = 7;   // 是否未指定套餐, 区分全部套餐和未指定套餐
}

message AddTmplsToTmplSetsResp {}

message DeleteTmplsFromTmplSetsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated uint32 template_set_ids = 3;
  repeated uint32 template_ids = 4;
  bool exclusion_operation = 5;
  bool no_set_specified = 6;  // 是否未指定套餐, 区分全部套餐和未指定套餐
}

message ListTemplatesByIDsReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
}

message ListTemplatesByIDsResp {
  repeated pbtemplate.Template details = 1;
}

message ListTemplatesNotBoundReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string search_fields = 3;
  string search_value = 4;
  uint32 start = 5;
  uint32 limit = 6;
  bool all = 7;
}

message ListTemplateByTupleReq {
  message Item {
    string name = 1;
    string path = 2;
  }
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated Item items = 3;
}

message ListTemplateByTupleResp {
  message Item {
    pbtemplate.Template template = 1;
    pbtr.TemplateRevision template_revision = 2;
  }
  repeated Item items = 1;
}

message ListTemplatesNotBoundResp {
  uint32 count = 1;
  repeated pbtemplate.Template details = 2;
}

message ListTmplsOfTmplSetReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_set_id = 3;
  string search_fields = 4;
  string search_value = 5;
  uint32 start = 6;
  uint32 limit = 7;
  repeated uint32 ids = 8;
  bool all = 9;
}

message ListTmplsOfTmplSetResp {
  uint32 count = 1;
  repeated pbtemplate.Template details = 2;
}

message ListTemplateSetsAndRevisionsReq {
  uint32 biz_id = 1;
  uint32 template_set_id = 2;
}

message ListTemplateSetsAndRevisionsResp {
  message Detail {
    pbtemplate.Template template = 1;
    repeated pbtr.TemplateRevision template_revision = 2;
  }
  repeated Detail details = 1;
}

message CreateTemplateRevisionReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string revision_name = 4;
  string revision_memo = 5;
  string name = 6;
  string path = 7;
  string file_type = 8;  // file_type is enum type
  string file_mode = 9;  // file_mode is enum type
  string user = 10;
  string user_group = 11;
  string privilege = 12;
  string sign = 13;
  uint64 byte_size = 14;
}

message CreateTemplateRevisionResp {
  uint32 id = 1;
}

message UpdateTemplateRevisionReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string revision_name = 4;
  string revision_memo = 5;
  string name = 6;
  string path = 7;
  string file_type = 8;  // file_type is enum type
  string file_mode = 9;  // file_mode is enum type
  string user = 10;
  string user_group = 11;
  string privilege = 12;
  string sign = 13;
  uint64 byte_size = 14;
  uint32 template_revision_id = 15;
  uint32 uid = 16;
  uint32 gid = 17;
}

message UpdateTemplateRevisionResp {
  uint32 id = 1;
}

message ListTemplateRevisionsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string search_fields = 4;
  string search_value = 5;
  uint32 start = 6;
  uint32 limit = 7;
  bool all = 8;
}

message ListTemplateRevisionsResp {
  uint32 count = 1;
  repeated pbtr.TemplateRevision details = 2;
}

message GetTemplateRevisionReq {
  uint32 biz_id = 1;
  uint32 template_id = 2;
  string revision_name = 3;
}

message GetTemplateRevisionResp {
  message TemplateRevision {
    uint32 template_id = 1;
    string name = 2;
    string path = 3;
    uint32 template_revision_id = 4;
    string template_revision_name = 5;
    string template_revision_memo = 6;
    string file_type = 7;
    string file_mode = 8;
    string user = 9;
    string user_group = 10;
    string privilege = 11;
    string signature = 12;
    uint64 byte_size = 13;
    string creator = 14;
    string create_at = 15;
    string md5 = 16;
    bool is_latest = 17;
    uint32 uid = 18;
    uint32 gid = 19;
  }
  TemplateRevision detail = 1;
}

message DeleteTemplateRevisionReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  uint32 template_revision_id = 4;
}

message DeleteTemplateRevisionResp {}

message ListTemplateRevisionsByIDsReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
}

message ListTemplateRevisionsByIDsResp {
  repeated pbtr.TemplateRevision details = 1;
}

message ListTmplRevisionNamesByTmplIDsReq {
  uint32 biz_id = 1;
  repeated uint32 template_ids = 2;
}

message ListTmplRevisionNamesByTmplIDsResp {
  repeated pbtr.TemplateRevisionNamesDetail details = 1;
}

message CreateTemplateSetReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string name = 3;
  string memo = 4;
  repeated uint32 template_ids = 5;
  bool public = 6;
  repeated uint32 bound_apps = 7;
}

message CreateTemplateSetResp {
  uint32 id = 1;
}

message UpdateTemplateSetReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_set_id = 3;
  string name = 4;
  string memo = 5;
  repeated uint32 template_ids = 6;
  bool public = 7;
  repeated uint32 bound_apps = 8;
  bool force = 9;
}

message UpdateTemplateSetResp {}

message DeleteTemplateSetReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_set_id = 3;
  bool force = 4;
}

message DeleteTemplateSetResp {}

message ListTemplateSetsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string search_fields = 3;
  string search_value = 4;
  uint32 start = 5;
  uint32 limit = 6;
  bool all = 7;
}

message ListTemplateSetsResp {
  uint32 count = 1;
  repeated pbtset.TemplateSet details = 2;
}

message ListAppTemplateSetsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ListAppTemplateSetsResp {
  repeated pbtset.TemplateSet details = 1;
}

message ListTemplateSetsByIDsReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
}

message ListTemplateSetsByIDsResp {
  repeated pbtset.TemplateSet details = 1;
}

message ListTmplSetsOfBizReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ListTmplSetsOfBizResp {
  repeated pbtset.TemplateSetOfBizDetail details = 1;
}

message CreateAppTemplateBindingReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated pbatb.TemplateBinding bindings = 3;
}

message CreateAppTemplateBindingResp {
  uint32 id = 1;
}

message UpdateAppTemplateBindingReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 binding_id = 3;
  repeated pbatb.TemplateBinding bindings = 4;
}

message UpdateAppTemplateBindingResp {}

message DeleteAppTemplateBindingReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 binding_id = 3;
}

message DeleteAppTemplateBindingResp {}

message ListAppTemplateBindingsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ListAppTemplateBindingsResp {
  uint32 count = 1;
  repeated pbatb.AppTemplateBinding details = 2;
}

message ListAppBoundTmplRevisionsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string search_fields = 3;
  string search_value = 4;
  bool with_status = 5;
  // ADD、REVISE、DELETE、UNCHANGE
  repeated string status = 6;
}

message ListAppBoundTmplRevisionsResp {
  repeated pbatb.AppBoundTmplRevisionGroupBySet details = 1;
}

message ListReleasedAppBoundTmplRevisionsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  string search_fields = 4;
  string search_value = 5;
}

message ListReleasedAppBoundTmplRevisionsResp {
  repeated pbatb.ReleasedAppBoundTmplRevisionGroupBySet details = 1;
}

message GetReleasedAppBoundTmplRevisionReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  uint32 template_revision_id = 4;
}

message GetReleasedAppBoundTmplRevisionResp {
  pbatb.ReleasedAppBoundTmplRevision detail = 1;
}

message UpdateAppBoundTmplRevisionsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 binding_id = 3;
  repeated pbatb.TemplateBinding bindings = 4;
}

message UpdateAppBoundTmplRevisionsResp {}

message DeleteAppBoundTmplSetsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 binding_id = 3;
  string template_set_ids = 4;
}

message DeleteAppBoundTmplSetsResp {}

message RemoveAppBoundTmplSetReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 template_set_id = 3;
}

message RemoveAppBoundTmplSetResp {}

message CheckAppTemplateBindingReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated pbatb.TemplateBinding bindings = 3;
}

message CheckAppTemplateBindingResp {
  repeated pbatb.Conflict details = 1;
}

message ImportFromTemplateSetToAppReq {
  message Binding {
    message TemplateRevisionBinding {
      uint32 template_id = 1;
      uint32 template_revision_id = 2;
      bool is_latest = 3;
      string template_name = 4;
      string template_revision_name = 5;
    }
    uint32 template_set_id = 1;
    uint32 template_space_id = 2;
    string template_space_name = 3;
    string template_set_name = 4;
    repeated TemplateRevisionBinding template_revisions = 5;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated Binding bindings = 3;
}

message ImportFromTemplateSetToAppResp {}

message ListTmplBoundCountsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated uint32 template_ids = 3;
}

message ListTmplBoundCountsResp {
  repeated pbtbr.TemplateBoundCounts details = 1;
}

message ListTmplRevisionBoundCountsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  repeated uint32 template_revision_ids = 4;
}

message ListTmplRevisionBoundCountsResp {
  repeated pbtbr.TemplateRevisionBoundCounts details = 1;
}

message ListTmplSetBoundCountsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated uint32 template_set_ids = 3;
}

message ListTmplSetBoundCountsResp {
  repeated pbtbr.TemplateSetBoundCounts details = 1;
}

message ListTmplBoundUnnamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string search_fields = 4;
  string search_value = 5;
  uint32 start = 6;
  uint32 limit = 7;
  bool all = 8;
}

message ListTmplBoundUnnamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateBoundUnnamedAppDetail details = 2;
}

message ListTmplBoundNamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  string search_fields = 4;
  string search_value = 5;
  uint32 start = 6;
  uint32 limit = 7;
  bool all = 8;
}

message ListTmplBoundNamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateBoundNamedAppDetail details = 2;
}

message ListTmplBoundTmplSetsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListTmplBoundTmplSetsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateBoundTemplateSetDetail details = 2;
}

message ListMultiTmplBoundTmplSetsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string template_ids = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListMultiTmplBoundTmplSetsResp {
  uint32 count = 1;
  repeated pbtbr.MultiTemplateBoundTemplateSetDetail details = 2;
}

message ListTmplRevisionBoundUnnamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  uint32 template_revision_id = 4;
  string search_fields = 5;
  string search_value = 6;
  uint32 start = 7;
  uint32 limit = 8;
  bool all = 9;
}

message ListTmplRevisionBoundUnnamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateRevisionBoundUnnamedAppDetail details = 2;
}

message ListTmplRevisionBoundNamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  uint32 template_revision_id = 4;
  string search_fields = 5;
  string search_value = 6;
  uint32 start = 7;
  uint32 limit = 8;
  bool all = 9;
}

message ListTmplRevisionBoundNamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateRevisionBoundNamedAppDetail details = 2;
}

message ListTmplSetBoundUnnamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_set_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListTmplSetBoundUnnamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateSetBoundUnnamedAppDetail details = 2;
}

message ListMultiTmplSetBoundUnnamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  string template_set_ids = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListMultiTmplSetBoundUnnamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.MultiTemplateSetBoundUnnamedAppDetail details = 2;
}

message CheckTemplateSetReferencesAppsReq {
  message Item {
    uint32 id = 1;
    string name = 2;
  }
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  repeated uint32 template_set_ids = 3;
  repeated Item items = 4;
}

message CheckTemplateSetReferencesAppsResp {
  message Item {
    uint32 template_set_id = 1;
    string template_set_name = 2;
    uint32 app_id = 3;
    string app_name = 4;
    bool app_exceeds_limit = 5;
    bool template_set_exceeds_limit = 6;
    uint32 app_exceeds_quantity = 7;
    uint32 template_set_exceeds_quantity = 8;
  }
  repeated Item items = 1;
}

message ListTmplSetBoundNamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_set_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListTmplSetBoundNamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.TemplateSetBoundNamedAppDetail details = 2;
}

message ListLatestTmplBoundUnnamedAppsReq {
  uint32 biz_id = 1;
  uint32 template_space_id = 2;
  uint32 template_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListLatestTmplBoundUnnamedAppsResp {
  uint32 count = 1;
  repeated pbtbr.LatestTemplateBoundUnnamedAppDetail details = 2;
}

message CreateTemplateVariableReq {
  uint32 biz_id = 1;
  string name = 2;
  string type = 3;
  string default_val = 4;
  string memo = 5;
}

message CreateTemplateVariableResp {
  uint32 id = 1;
}

message UpdateTemplateVariableReq {
  uint32 biz_id = 1;
  uint32 template_variable_id = 2;
  string default_val = 3;
  string memo = 4;
}

message UpdateTemplateVariableResp {}

message DeleteTemplateVariableReq {
  uint32 biz_id = 1;
  uint32 template_variable_id = 2;
}

message DeleteTemplateVariableResp {}

message ListTemplateVariablesReq {
  uint32 biz_id = 1;
  string search_fields = 2;
  string search_value = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListTemplateVariablesResp {
  uint32 count = 1;
  repeated pbtv.TemplateVariable details = 2;
}

message ImportTemplateVariablesReq {
  uint32 biz_id = 1;
  string separator = 2;
  string variables = 3;
}

message ImportTemplateVariablesResp {
  uint32 variable_count = 1;
}

message ExtractAppTmplVariablesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ExtractAppTmplVariablesResp {
  repeated string details = 1;
}

message GetAppTmplVariableRefsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message GetAppTmplVariableRefsResp {
  repeated pbatv.AppTemplateVariableReference details = 1;
}

message GetReleasedAppTmplVariableRefsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message GetReleasedAppTmplVariableRefsResp {
  repeated pbatv.AppTemplateVariableReference details = 1;
}

message UpdateAppTmplVariablesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated pbtv.TemplateVariableSpec variables = 3;
}

message UpdateAppTmplVariablesResp {}

message ListAppTmplVariablesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ListAppTmplVariablesResp {
  repeated pbtv.TemplateVariableSpec details = 1;
}

message ListReleasedAppTmplVariablesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
}

message ListReleasedAppTmplVariablesResp {
  repeated pbtv.TemplateVariableSpec details = 1;
}

message CreateGroupReq {
  uint32 biz_id = 1;
  string name = 2;
  bool public = 3;
  repeated uint32 bind_apps = 4;
  string mode = 5;
  google.protobuf.Struct selector = 6;
  string uid = 7;
}

message CreateGroupResp {
  uint32 id = 1;
}

message UpdateGroupReq {
  uint32 biz_id = 1;
  uint32 group_id = 2;
  string name = 3;
  bool public = 4;
  repeated uint32 bind_apps = 5;
  string mode = 6;
  google.protobuf.Struct selector = 7;
  string uid = 8;
}

message UpdateGroupResp {}

message DeleteGroupReq {
  uint32 biz_id = 1;
  uint32 group_id = 2;
}

message DeleteGroupResp {}

message ListAllGroupsReq {
  uint32 biz_id = 1;
}

message ListAllGroupsResp {
  message ListAllGroupsData {
    message BindApp {
      uint32 id = 1;
      string name = 2;
    }
    uint32 id = 1;
    string name = 2;
    bool public = 3;
    repeated BindApp bind_apps = 4;
    google.protobuf.Struct selector = 5;
    uint32 released_apps_num = 6;
    bool edited = 7;
  }
  repeated ListAllGroupsData details = 1;
}

message ListAppGroupsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message ListAppGroupsResp {
  message ListAppGroupsData {
    uint32 group_id = 1;
    string group_name = 2;
    uint32 release_id = 3;
    string release_name = 4;
    google.protobuf.Struct old_selector = 5;
    google.protobuf.Struct new_selector = 6;
    bool edited = 7;
  }
  repeated ListAppGroupsData details = 1;
}

message ListGroupReleasedAppsReq {
  uint32 biz_id = 1;
  uint32 group_id = 2;
  string search_key = 3;
  uint32 start = 4;
  uint32 limit = 5;
}

message ListGroupReleasedAppsResp {
  message ListGroupReleasedAppsData {
    uint32 app_id = 1;
    string app_name = 2;
    uint32 release_id = 3;
    string release_name = 4;
    bool edited = 5;
  }
  uint32 count = 1;
  repeated ListGroupReleasedAppsData details = 2;
}

message GetGroupByNameReq {
  uint32 biz_id = 1;
  string group_name = 2;
}

message PublishReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  string memo = 4;
  bool all = 5;
  string gray_publish_mode = 6;
  bool default = 7;
  repeated uint32 groups = 8;
  repeated google.protobuf.Struct labels = 9;
  string group_name = 10;
}

message GenerateReleaseAndPublishReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string release_name = 3;
  string release_memo = 4;
  repeated pbtv.TemplateVariableSpec variables = 5;
  bool all = 6;
  string gray_publish_mode = 7;
  repeated string groups = 8;
  repeated google.protobuf.Struct labels = 9;
  string group_name = 10;
}

message GenerateReleaseAndPublishResp {
  uint32 id = 1;
}

message PublishResp {
  uint32 id = 1;
  bool have_credentials = 2;
  bool have_pull = 3;
}

message CreateKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string key = 3;
  string kv_type = 4;
  string value = 5;
  string memo = 6;
  string secret_type = 7;
  bool secret_hidden = 8;
}

message CreateKvResp {
  uint32 id = 1;
}

message UpdateKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string key = 4;
  string memo = 5;
  string value = 6;
  string secret_type = 7;
  bool secret_hidden = 8;
}

message UpdateKvResp {}

message ListKvsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  bool all = 3;
  string search_key = 4;
  repeated string key = 5;
  uint32 start = 6;
  uint32 limit = 7;
  bool with_status = 8;
  string search_fields = 9;
  string search_value = 10;
  repeated string kv_type = 11;
  string sort = 12;
  string order = 13;
  repeated uint32 top_ids = 14;  // 置顶的ID
  // ADD、REVISE、DELETE、UNCHANGE
  repeated string status = 15;
}

message ListKvsResp {
  uint32 count = 1;
  repeated pbkv.Kv details = 2;
  uint32 exclusion_count = 3;  // 排除删除后的数量
}

message DeleteKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 id = 3;
}

message DeleteKvResp {}

message BatchDeleteBizResourcesReq {
  uint32 biz_id = 1;
  repeated uint32 ids = 2;
  bool exclusion_operation = 3;
}

message BatchDeleteAppResourcesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated uint32 ids = 3;
  bool exclusion_operation = 4;
}

message BatchDeleteResp {
  repeated uint32 successful_ids = 1;
  repeated uint32 failed_ids = 2;
}

message BatchUpsertKvsReq {
  message Kv {
    string key = 1;
    string kv_type = 2;
    string value = 3;
    string memo = 4;
    string secret_type = 5;
    bool secret_hidden = 6;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated Kv kvs = 3;
  bool replace_all = 4;
}

message BatchUpsertKvsResp {
  repeated uint32 ids = 1;
}

message UnDeleteKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string key = 3;
}

message UnDeleteKvResp {}

message UndoKvReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string key = 3;
}

message UndoKvResp {}

message ImportKvsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string format = 3;
  string data = 4;
}

message ImportKvsResp {}

message ListClientsReq {
  message Order {
    string desc = 1;
    string asc = 2;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  bool all = 3;
  uint32 start = 4;
  uint32 limit = 5;
  Order order = 6;
  int64 last_heartbeat_time = 7;
  pbclient.ClientQueryCondition search = 8;
}

message ListClientsResp {
  message Item {
    pbclient.Client client = 1;
    string cpu_usage_str = 2;
    string cpu_max_usage_str = 3;
    string memory_usage_str = 4;
    string memory_max_usage_str = 5;
  }
  uint32 count = 1;
  repeated Item details = 2;
  uint32 exclusion_count = 9;  // 排除离线的数量
}

message ListClientEventsReq {
  message Order {
    string desc = 1;
    string asc = 2;
  }
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 client_id = 3;
  bool all = 4;
  uint32 start = 5;
  uint32 limit = 6;
  Order order = 7;
  string search_value = 8;
  string start_time = 9;
  string end_time = 10;
}

message ListClientEventsResp {
  uint32 count = 1;
  repeated pbce.ClientEvent details = 2;
}

message RetryClientsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  repeated uint32 client_ids = 3;
  bool all = 4;
  bool exclusion_operation = 5;
}

message RetryClientsResp {}

message ListClientQuerysReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string search_type = 3;  // 搜索类型：recent、common
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
}

message ListClientQuerysResp {
  uint32 count = 1;
  repeated pbcq.ClientQuery details = 2;
}

message CreateClientQueryReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  string search_type = 3;
  string search_name = 4;
  google.protobuf.Struct search_condition = 5;
}

message CreateClientQueryResp {
  uint32 id = 1;
}

message UpdateClientQueryReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
  string search_name = 4;
  google.protobuf.Struct search_condition = 5;
}

message UpdateClientQueryResp {}

message DeleteClientQueryReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
}

message DeleteClientQueryResp {}

message CheckClientQueryNameReq {
  string name = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
}

message CheckClientQueryNameResp {
  bool exist = 1;
}

message ListClientLabelAndAnnotationReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  int64 last_heartbeat_time = 3;
}

message CompareConfigItemConflictsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  uint32 other_app_id = 4;
}

message CompareConfigItemConflictsResp {
  message NonTemplateConfig {
    uint32 id = 1;
    pbci.ConfigItemSpec config_item_spec = 2;
    repeated pbtv.TemplateVariableSpec variables = 3;
    bool is_exist = 4;
    string signature = 5;
    uint64 byte_size = 6;
    string md5 = 7;
  }
  message TemplateConfig {
    message TemplateRevisionDetail {
      uint32 template_id = 1;
      uint32 template_revision_id = 2;
      bool is_latest = 3;
      repeated pbtv.TemplateVariableSpec variables = 5;
      pbci.FilePermission permission = 6;
    }
    uint32 template_space_id = 1;
    string template_space_name = 2;
    uint32 template_set_id = 3;
    string template_set_name = 4;
    bool is_exist = 5;
    repeated TemplateRevisionDetail template_revisions = 6;
    bool template_space_exist = 7;
    bool template_set_exist = 8;
    bool template_set_is_empty = 9;
  }
  repeated NonTemplateConfig non_template_configs = 2;
  repeated TemplateConfig template_configs = 1;
}

message CompareKvConflictsReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 release_id = 3;
  uint32 other_app_id = 4;
}

message CompareKvConflictsResp {
  message Kv {
    string key = 1;
    string kv_type = 2;
    string value = 3;
    string memo = 4;
    string secret_type = 5;
    bool secret_hidden = 6;
  }
  repeated Kv exist = 1;
  repeated Kv non_exist = 2;
}

message GetTemplateAndNonTemplateCICountReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
}

message GetTemplateAndNonTemplateCICountResp {
  uint64 config_item_count = 1;
  uint64 template_config_item_count = 2;
}

message CreateUserPrivilegesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 uid = 3;
  uint32 gid = 4;
  string user = 5;
  string user_group = 6;
  string privilege_type = 7;  // 权限类型：system、custom
  bool read_only = 8;         // 只读
}

message CreateUserPrivilegesResp {
  uint32 id = 1;
}

message ListUserPrivilegesReq {
  uint32 biz_id = 1;
  uint32 app_id = 2;
  uint32 template_space_id = 3;
  uint32 start = 4;
  uint32 limit = 5;
  bool all = 6;
  string name = 7;  // 名称
}

message ListUserPrivilegesResp {
  message Detail {
    uint32 id = 1;
    string name = 2;
    string privilege_type = 3;
    bool read_only = 4;
    uint32 pid = 5;  // 权限ID
  }
  uint32 count = 1;
  repeated Detail details = 2;
}

message DeleteUserPrivilegesReq {
  uint32 id = 1;
  uint32 biz_id = 2;
  uint32 app_id = 3;
  uint32 template_space_id = 4;
}

message DeleteUserPrivilegesResp {}